// File: deflate.v
// Generated by MyHDL 0.10
// Date: Mon Feb  4 17:28:53 2019


`timescale 1ns/10ps

module deflate (
    i_mode,
    o_done,
    i_data,
    o_iprogress,
    o_oprogress,
    o_byte,
    i_waddr,
    i_raddr,
    clk,
    reset
);
// Deflate (de)compress
// 
// Ports:

input [2:0] i_mode;
output o_done;
reg o_done;
input [7:0] i_data;
output [23:0] o_iprogress;
reg [23:0] o_iprogress;
output [23:0] o_oprogress;
reg [23:0] o_oprogress;
output [7:0] o_byte;
reg [7:0] o_byte;
input [8:0] i_waddr;
input [8:0] i_raddr;
input clk;
input reset;

reg [18:0] wleaf;
reg [9:0] step;
reg static;
reg [4:0] state;
reg [18:0] stat_leaf;
reg [8:0] spread_i;
reg [9:0] spread;
reg [18:0] rleaf;
reg [14:0] reverse;
reg [3:0] rcount;
reg [1:0] prev_method;
reg [3:0] outcarrybits;
reg [8:0] outcarry;
reg [7:0] orbyte;
reg [8:0] oraddr;
reg [23:0] old_di;
reg [8:0] offset;
reg off2;
reg off1;
reg [7:0] obyte;
reg [7:0] ob1;
reg [8:0] oaddr;
reg [8:0] numLiterals;
reg [5:0] numDistance;
reg [8:0] numCodeLength;
reg nb;
reg [3:0] more;
reg [3:0] mlength;
reg [3:0] minBits;
reg [2:0] method;
reg [3:0] maxBits;
reg [14:0] lwaddr;
reg [14:0] lraddr;
reg [8:0] length;
reg [18:0] leaf;
reg [8:0] lastToken;
reg [15:0] ladler1;
reg [23:0] isize;
wire [7:0] irbyte;
reg [3:0] instantMaxBit;
reg [14:0] instantMask;
reg [8:0] howOften;
reg flush;
reg first_block;
reg final;
reg filled;
reg [3:0] fcount;
reg [18:0] dwleaf;
reg [18:0] drleaf;
reg [2:0] doo;
reg do_init;
reg do_compress;
reg [23:0] do;
reg [14:0] dlwaddr;
reg [14:0] dlraddr;
reg [9:0] dlength;
reg [2:0] dio;
reg [23:0] di;
reg [3:0] d_maxBits;
reg [3:0] d_instantMaxBit;
reg [14:0] d_instantMask;
reg [8:0] cur_static;
reg signed [24:0] cur_search;
reg [4:0] cur_next;
reg [23:0] cur_i;
reg signed [9:0] cur_dist;
reg [3:0] cur_cstatic;
reg [15:0] cur_HF1;
reg [7:0] copy2;
reg [7:0] copy1;
reg [14:0] code;
reg [3:0] bits;
reg [8:0] b_numCodeLength;
reg [7:0] b9;
reg [7:0] b8;
reg [7:0] b7;
reg [7:0] b6;
reg [7:0] b5;
wire [31:0] b41;
reg [7:0] b4;
reg [7:0] b3;
reg [7:0] b2;
wire [39:0] b15;
wire [31:0] b14;
wire [79:0] b110;
reg [7:0] b10;
reg [7:0] b1;
reg [15:0] adler2;
reg [15:0] adler1;
reg [255:0] cwindow;
reg [7:0] oram [0:512-1];
reg [15:0] nextCode [0:16-1];
reg [18:0] leaves [0:32768-1];
reg [7:0] iram [0:512-1];
reg [3:0] distanceLength [0:32-1];
reg [18:0] d_leaves [0:4096-1];
reg [3:0] codeLength [0:320-1];
reg [8:0] bitLengthCount [0:16-1];
wire smatch [0:32-1];

assign irbyte = 8'd0;
assign b41[32-1:24] = b4;
assign b41[24-1:16] = b3;
assign b41[16-1:8] = b2;
assign b41[8-1:0] = b1;
assign b15[40-1:32] = b1;
assign b15[32-1:24] = b2;
assign b15[24-1:16] = b3;
assign b15[16-1:8] = b4;
assign b15[8-1:0] = b5;
assign b14[32-1:24] = b1;
assign b14[24-1:16] = b2;
assign b14[16-1:8] = b3;
assign b14[8-1:0] = b4;
assign b110[80-1:72] = b1;
assign b110[72-1:64] = b2;
assign b110[64-1:56] = b3;
assign b110[56-1:48] = b4;
assign b110[48-1:40] = b5;
assign b110[40-1:32] = b6;
assign b110[32-1:24] = b7;
assign b110[24-1:16] = b8;
assign b110[16-1:8] = b9;
assign b110[8-1:0] = b10;

function integer MYHDL39_get4;
    input boffset;
    input width;
begin: MYHDL109_RETURN
    MYHDL39_get4 = ((b41 >>> (dio + boffset)) & ((1 << width) - 1));
    disable MYHDL109_RETURN;
end
endfunction

function integer MYHDL40_get4;
    input boffset;
    input width;
    integer width;
begin: MYHDL110_RETURN
    MYHDL40_get4 = ((b41 >>> (dio + boffset)) & ((1 << width) - 1));
    disable MYHDL110_RETURN;
end
endfunction

task MYHDL41_adv;
    input width;
    integer width;
    integer nshift;
begin: MYHDL111_RETURN
    if ((!1'b1)) begin
        $finish;
    end
    nshift = ((dio + width) >>> 3);
    o_iprogress <= di;
    dio <= ((dio + width) & 7);
    di <= ($signed({1'b0, di}) + nshift);
    if ((nshift != 0)) begin
        filled <= 1'b0;
    end
end
endtask

task MYHDL42_adv;
    input width;
    integer width;
    integer nshift;
begin: MYHDL112_RETURN
    if ((!1'b1)) begin
        $finish;
    end
    nshift = ((dio + width) >>> 3);
    o_iprogress <= di;
    dio <= ((dio + width) & 7);
    di <= ($signed({1'b0, di}) + nshift);
    if ((nshift != 0)) begin
        filled <= 1'b0;
    end
end
endtask

function integer MYHDL43_get4;
    input boffset;
    integer boffset;
    input width;
    integer width;
begin: MYHDL113_RETURN
    MYHDL43_get4 = ($signed($signed({1'b0, b41}) >>> ($signed({1'b0, dio}) + boffset)) & ((1 << width) - 1));
    disable MYHDL113_RETURN;
end
endfunction

task MYHDL44_adv;
    input width;
    integer width;
    integer nshift;
begin: MYHDL114_RETURN
    if ((!1'b1)) begin
        $finish;
    end
    nshift = $signed(($signed({1'b0, dio}) + width) >>> 3);
    o_iprogress <= di;
    dio <= (($signed({1'b0, dio}) + width) & 7);
    di <= ($signed({1'b0, di}) + nshift);
    if ((nshift != 0)) begin
        filled <= 1'b0;
    end
end
endtask

task MYHDL45_adv;
    input width;
    integer width;
    integer nshift;
begin: MYHDL115_RETURN
    if ((!1'b1)) begin
        $finish;
    end
    nshift = ((dio + width) >>> 3);
    o_iprogress <= di;
    dio <= ((dio + width) & 7);
    di <= ($signed({1'b0, di}) + nshift);
    if ((nshift != 0)) begin
        filled <= 1'b0;
    end
end
endtask

task MYHDL46_put;
    input d;
    integer d;
    input width;
    integer width;
    reg pshift;
    integer carry;
    integer doo_next;
begin: MYHDL116_RETURN
    if ((width > 9)) begin
        $finish;
    end
    if (($signed({1'b0, d}) > ((1 << width) - 1))) begin
        $finish;
    end
    obyte <= ((ob1 | (d << doo)) & 255);
    oaddr <= do;
    pshift = ((doo + width) > 8);
    if (pshift) begin
        carry = ($signed({1'b0, width}) - (8 - $signed({1'b0, doo})));
        ob1 <= $signed($signed({1'b0, d}) >>> ($signed({1'b0, width}) - carry));
    end
    else begin
        ob1 <= (ob1 | (d << doo));
    end
    do <= (do + pshift);
    o_oprogress <= (do + pshift);
    doo_next = ((doo + width) & 7);
    if ((doo_next == 0)) begin
        flush <= 1'b1;
    end
    doo <= doo_next;
end
endtask

task MYHDL47_do_flush;
begin: MYHDL117_RETURN
    flush <= 1'b0;
    ob1 <= 0;
    o_oprogress <= (do + 1);
    do <= (do + 1);
end
endtask

task MYHDL48_put;
    input d;
    integer d;
    input [4-1:0] width;
    reg pshift;
    integer carry;
    integer doo_next;
begin: MYHDL118_RETURN
    if ((width > 9)) begin
        $finish;
    end
    if ((d > ((1 << width) - 1))) begin
        $finish;
    end
    obyte <= (($signed({1'b0, ob1}) | (d << $signed({1'b0, doo}))) & 255);
    oaddr <= do;
    pshift = ((doo + width) > 8);
    if (pshift) begin
        carry = ($signed({1'b0, width}) - (8 - $signed({1'b0, doo})));
        ob1 <= $signed(d >>> ($signed({1'b0, width}) - carry));
    end
    else begin
        ob1 <= ($signed({1'b0, ob1}) | (d << $signed({1'b0, doo})));
    end
    do <= (do + pshift);
    o_oprogress <= (do + pshift);
    doo_next = ((doo + width) & 7);
    if ((doo_next == 0)) begin
        flush <= 1'b1;
    end
    doo <= doo_next;
end
endtask

task MYHDL49_do_flush;
begin: MYHDL119_RETURN
    flush <= 1'b0;
    ob1 <= 0;
    o_oprogress <= (do + 1);
    do <= (do + 1);
end
endtask

task MYHDL50_put;
    input d;
    integer d;
    input [4-1:0] width;
    reg pshift;
    integer carry;
    integer doo_next;
begin: MYHDL120_RETURN
    if ((width > 9)) begin
        $finish;
    end
    if ((d > ((1 << width) - 1))) begin
        $finish;
    end
    obyte <= (($signed({1'b0, ob1}) | (d << $signed({1'b0, doo}))) & 255);
    oaddr <= do;
    pshift = ((doo + width) > 8);
    if (pshift) begin
        carry = ($signed({1'b0, width}) - (8 - $signed({1'b0, doo})));
        ob1 <= $signed(d >>> ($signed({1'b0, width}) - carry));
    end
    else begin
        ob1 <= ($signed({1'b0, ob1}) | (d << $signed({1'b0, doo})));
    end
    do <= (do + pshift);
    o_oprogress <= (do + pshift);
    doo_next = ((doo + width) & 7);
    if ((doo_next == 0)) begin
        flush <= 1'b1;
    end
    doo <= doo_next;
end
endtask

task MYHDL51_put;
    input [9-1:0] d;
    input [4-1:0] width;
    reg pshift;
    integer carry;
    integer doo_next;
begin: MYHDL121_RETURN
    if ((width > 9)) begin
        $finish;
    end
    if (($signed({1'b0, d}) > ((1 << width) - 1))) begin
        $finish;
    end
    obyte <= ((ob1 | (d << doo)) & 255);
    oaddr <= do;
    pshift = ((doo + width) > 8);
    if (pshift) begin
        carry = ($signed({1'b0, width}) - (8 - $signed({1'b0, doo})));
        ob1 <= $signed($signed({1'b0, d}) >>> ($signed({1'b0, width}) - carry));
    end
    else begin
        ob1 <= (ob1 | (d << doo));
    end
    do <= (do + pshift);
    o_oprogress <= (do + pshift);
    doo_next = ((doo + width) & 7);
    if ((doo_next == 0)) begin
        flush <= 1'b1;
    end
    doo <= doo_next;
end
endtask

function integer MYHDL52_rev_bits;
    input [24-1:0] b;
    input nb;
    integer nb;
    integer r;
begin: MYHDL122_RETURN
    if ((b >= (1 << nb))) begin
        $finish;
        $write("too few bits");
        $write("\n");
    end
    if ((nb > 15)) begin
        $finish;
    end
    r = (((((((((((((((((b >>> 14) & 1) << 0) | (((b >>> 13) & 1) << 1)) | (((b >>> 12) & 1) << 2)) | (((b >>> 11) & 1) << 3)) | (((b >>> 10) & 1) << 4)) | (((b >>> 9) & 1) << 5)) | (((b >>> 8) & 1) << 6)) | (((b >>> 7) & 1) << 7)) | (((b >>> 6) & 1) << 8)) | (((b >>> 5) & 1) << 9)) | (((b >>> 4) & 1) << 10)) | (((b >>> 3) & 1) << 11)) | (((b >>> 2) & 1) << 12)) | (((b >>> 1) & 1) << 13)) | (((b >>> 0) & 1) << 14));
    r = r >>> (15 - $signed({1'b0, nb}));
    MYHDL52_rev_bits = r;
    disable MYHDL122_RETURN;
end
endfunction

task MYHDL53_put;
    input d;
    integer d;
    input width;
    integer width;
    reg pshift;
    integer carry;
    integer doo_next;
begin: MYHDL123_RETURN
    if ((width > 9)) begin
        $finish;
    end
    if ((d > ((1 << width) - 1))) begin
        $finish;
    end
    obyte <= (($signed({1'b0, ob1}) | (d << $signed({1'b0, doo}))) & 255);
    oaddr <= do;
    pshift = (($signed({1'b0, doo}) + width) > 8);
    if (pshift) begin
        carry = (width - (8 - $signed({1'b0, doo})));
        ob1 <= $signed(d >>> (width - carry));
    end
    else begin
        ob1 <= ($signed({1'b0, ob1}) | (d << $signed({1'b0, doo})));
    end
    do <= (do + pshift);
    o_oprogress <= (do + pshift);
    doo_next = (($signed({1'b0, doo}) + width) & 7);
    if ((doo_next == 0)) begin
        flush <= 1'b1;
    end
    doo <= doo_next;
end
endtask

task MYHDL54_put;
    input d;
    integer d;
    input width;
    integer width;
    reg pshift;
    integer carry;
    integer doo_next;
begin: MYHDL124_RETURN
    if ((width > 9)) begin
        $finish;
    end
    if ((d > ((1 << width) - 1))) begin
        $finish;
    end
    obyte <= (($signed({1'b0, ob1}) | (d << $signed({1'b0, doo}))) & 255);
    oaddr <= do;
    pshift = ((doo + width) > 8);
    if (pshift) begin
        carry = ($signed({1'b0, width}) - (8 - $signed({1'b0, doo})));
        ob1 <= $signed(d >>> ($signed({1'b0, width}) - carry));
    end
    else begin
        ob1 <= ($signed({1'b0, ob1}) | (d << $signed({1'b0, doo})));
    end
    do <= (do + pshift);
    o_oprogress <= (do + pshift);
    doo_next = ((doo + width) & 7);
    if ((doo_next == 0)) begin
        flush <= 1'b1;
    end
    doo <= doo_next;
end
endtask

task MYHDL57_put;
    input d;
    integer d;
    input [4-1:0] width;
    reg pshift;
    integer carry;
    integer doo_next;
begin: MYHDL125_RETURN
    if ((width > 9)) begin
        $finish;
    end
    if ((d > ((1 << width) - 1))) begin
        $finish;
    end
    obyte <= (($signed({1'b0, ob1}) | (d << $signed({1'b0, doo}))) & 255);
    oaddr <= do;
    pshift = ((doo + width) > 8);
    if (pshift) begin
        carry = ($signed({1'b0, width}) - (8 - $signed({1'b0, doo})));
        ob1 <= $signed(d >>> ($signed({1'b0, width}) - carry));
    end
    else begin
        ob1 <= ($signed({1'b0, ob1}) | (d << $signed({1'b0, doo})));
    end
    do <= (do + pshift);
    o_oprogress <= (do + pshift);
    doo_next = ((doo + width) & 7);
    if ((doo_next == 0)) begin
        flush <= 1'b1;
    end
    doo <= doo_next;
end
endtask

function integer MYHDL66_get4;
    input boffset;
    input width;
    integer width;
begin: MYHDL126_RETURN
    MYHDL66_get4 = ((b41 >>> (dio + boffset)) & ((1 << width) - 1));
    disable MYHDL126_RETURN;
end
endfunction

function integer MYHDL67_get4;
    input boffset;
    input width;
    integer width;
begin: MYHDL127_RETURN
    MYHDL67_get4 = ((b41 >>> (dio + boffset)) & ((1 << width) - 1));
    disable MYHDL127_RETURN;
end
endfunction

function integer MYHDL68_get4;
    input boffset;
    integer boffset;
    input width;
    integer width;
begin: MYHDL128_RETURN
    MYHDL68_get4 = ((b41 >>> (dio + boffset)) & ((1 << width) - 1));
    disable MYHDL128_RETURN;
end
endfunction

function integer MYHDL69_get4;
    input boffset;
    integer boffset;
    input width;
    integer width;
begin: MYHDL129_RETURN
    MYHDL69_get4 = ((b41 >>> (dio + boffset)) & ((1 << width) - 1));
    disable MYHDL129_RETURN;
end
endfunction

function integer MYHDL70_get4;
    input boffset;
    integer boffset;
    input width;
    integer width;
begin: MYHDL130_RETURN
    MYHDL70_get4 = ((b41 >>> (dio + boffset)) & ((1 << width) - 1));
    disable MYHDL130_RETURN;
end
endfunction

function integer MYHDL71_get4;
    input boffset;
    integer boffset;
    input width;
    integer width;
begin: MYHDL131_RETURN
    MYHDL71_get4 = ((b41 >>> (dio + boffset)) & ((1 << width) - 1));
    disable MYHDL131_RETURN;
end
endfunction

task MYHDL72_adv;
    input width;
    integer width;
    integer nshift;
begin: MYHDL132_RETURN
    if ((!1'b1)) begin
        $finish;
    end
    nshift = ((dio + width) >>> 3);
    o_iprogress <= di;
    dio <= ((dio + width) & 7);
    di <= ($signed({1'b0, di}) + nshift);
    if ((nshift != 0)) begin
        filled <= 1'b0;
    end
end
endtask

function integer MYHDL73_get4;
    input boffset;
    input width;
    integer width;
begin: MYHDL133_RETURN
    MYHDL73_get4 = ((b41 >>> (dio + boffset)) & ((1 << width) - 1));
    disable MYHDL133_RETURN;
end
endfunction

task MYHDL74_adv;
    input width;
    integer width;
    integer nshift;
begin: MYHDL134_RETURN
    if ((!1'b1)) begin
        $finish;
    end
    nshift = ((dio + width) >>> 3);
    o_iprogress <= di;
    dio <= ((dio + width) & 7);
    di <= ($signed({1'b0, di}) + nshift);
    if ((nshift != 0)) begin
        filled <= 1'b0;
    end
end
endtask

function integer MYHDL75_get4;
    input boffset;
    input width;
    integer width;
begin: MYHDL135_RETURN
    MYHDL75_get4 = ((b41 >>> (dio + boffset)) & ((1 << width) - 1));
    disable MYHDL135_RETURN;
end
endfunction

function integer MYHDL76_get4;
    input boffset;
    input width;
    integer width;
begin: MYHDL136_RETURN
    MYHDL76_get4 = ((b41 >>> (dio + boffset)) & ((1 << width) - 1));
    disable MYHDL136_RETURN;
end
endfunction

function integer MYHDL77_get4;
    input boffset;
    input width;
    integer width;
begin: MYHDL137_RETURN
    MYHDL77_get4 = ((b41 >>> (dio + boffset)) & ((1 << width) - 1));
    disable MYHDL137_RETURN;
end
endfunction

task MYHDL78_adv;
    input width;
    integer width;
    integer nshift;
begin: MYHDL138_RETURN
    if ((!1'b1)) begin
        $finish;
    end
    nshift = ((dio + width) >>> 3);
    o_iprogress <= di;
    dio <= ((dio + width) & 7);
    di <= ($signed({1'b0, di}) + nshift);
    if ((nshift != 0)) begin
        filled <= 1'b0;
    end
end
endtask

function integer MYHDL83_rev_bits;
    input [16-1:0] b;
    input [4-1:0] nb;
    integer r;
begin: MYHDL139_RETURN
    if ((b >= (1 << nb))) begin
        $finish;
        $write("too few bits");
        $write("\n");
    end
    if ((nb > 15)) begin
        $finish;
    end
    r = (((((((((((((((((b >>> 14) & 1) << 0) | (((b >>> 13) & 1) << 1)) | (((b >>> 12) & 1) << 2)) | (((b >>> 11) & 1) << 3)) | (((b >>> 10) & 1) << 4)) | (((b >>> 9) & 1) << 5)) | (((b >>> 8) & 1) << 6)) | (((b >>> 7) & 1) << 7)) | (((b >>> 6) & 1) << 8)) | (((b >>> 5) & 1) << 9)) | (((b >>> 4) & 1) << 10)) | (((b >>> 3) & 1) << 11)) | (((b >>> 2) & 1) << 12)) | (((b >>> 1) & 1) << 13)) | (((b >>> 0) & 1) << 14));
    r = r >>> (15 - $signed({1'b0, nb}));
    MYHDL83_rev_bits = r;
    disable MYHDL139_RETURN;
end
endfunction

function integer MYHDL84_makeLeaf;
    input [9-1:0] lcode;
    input [4-1:0] lbits;
begin: MYHDL140_RETURN
    if ((lcode >= (1 << 15))) begin
        $finish;
    end
    if ((lbits >= (1 << 4))) begin
        $finish;
    end
    MYHDL84_makeLeaf = ((lcode << 4) | lbits);
    disable MYHDL140_RETURN;
end
endfunction

function integer MYHDL85_makeLeaf;
    input [9-1:0] lcode;
    input [4-1:0] lbits;
begin: MYHDL141_RETURN
    if ((lcode >= (1 << 15))) begin
        $finish;
    end
    if ((lbits >= (1 << 4))) begin
        $finish;
    end
    MYHDL85_makeLeaf = ((lcode << 4) | lbits);
    disable MYHDL141_RETURN;
end
endfunction

function integer MYHDL86_makeLeaf;
    input [9-1:0] lcode;
    input [4-1:0] lbits;
begin: MYHDL142_RETURN
    if ((lcode >= (1 << 15))) begin
        $finish;
    end
    if ((lbits >= (1 << 4))) begin
        $finish;
    end
    MYHDL86_makeLeaf = ((lcode << 4) | lbits);
    disable MYHDL142_RETURN;
end
endfunction

function integer MYHDL87_get4;
    input boffset;
    input [4-1:0] width;
begin: MYHDL143_RETURN
    MYHDL87_get4 = ((b41 >>> (dio + boffset)) & ((1 << width) - 1));
    disable MYHDL143_RETURN;
end
endfunction

function integer MYHDL88_get_bits;
    input [19-1:0] aleaf;
begin: MYHDL144_RETURN
    MYHDL88_get_bits = ($signed({1'b0, aleaf}) & ((1 << 4) - 1));
    disable MYHDL144_RETURN;
end
endfunction

function integer MYHDL89_get4;
    input boffset;
    input [4-1:0] width;
begin: MYHDL145_RETURN
    MYHDL89_get4 = ((b41 >>> (dio + boffset)) & ((1 << width) - 1));
    disable MYHDL145_RETURN;
end
endfunction

function integer MYHDL90_get_bits;
    input [19-1:0] aleaf;
begin: MYHDL146_RETURN
    MYHDL90_get_bits = ($signed({1'b0, aleaf}) & ((1 << 4) - 1));
    disable MYHDL146_RETURN;
end
endfunction

function integer MYHDL91_get_bits;
    input [19-1:0] aleaf;
begin: MYHDL147_RETURN
    MYHDL91_get_bits = ($signed({1'b0, aleaf}) & ((1 << 4) - 1));
    disable MYHDL147_RETURN;
end
endfunction

task MYHDL92_adv;
    input width;
    integer width;
    integer nshift;
begin: MYHDL148_RETURN
    if ((!1'b1)) begin
        $finish;
    end
    nshift = $signed(($signed({1'b0, dio}) + width) >>> 3);
    o_iprogress <= di;
    dio <= (($signed({1'b0, dio}) + width) & 7);
    di <= ($signed({1'b0, di}) + nshift);
    if ((nshift != 0)) begin
        filled <= 1'b0;
    end
end
endtask

function integer MYHDL93_get_code;
    input [19-1:0] aleaf;
begin: MYHDL149_RETURN
    MYHDL93_get_code = (aleaf >>> 4);
    disable MYHDL149_RETURN;
end
endfunction

function integer MYHDL94_get4;
    input boffset;
    integer boffset;
    input [4-1:0] width;
begin: MYHDL150_RETURN
    MYHDL94_get4 = ($signed($signed({1'b0, b41}) >>> ($signed({1'b0, dio}) + boffset)) & ((1 << width) - 1));
    disable MYHDL150_RETURN;
end
endfunction

function integer MYHDL95_get_bits;
    input [19-1:0] aleaf;
begin: MYHDL151_RETURN
    MYHDL95_get_bits = ($signed({1'b0, aleaf}) & ((1 << 4) - 1));
    disable MYHDL151_RETURN;
end
endfunction

function integer MYHDL96_get4;
    input boffset;
    integer boffset;
    input [4-1:0] width;
begin: MYHDL152_RETURN
    MYHDL96_get4 = ($signed($signed({1'b0, b41}) >>> ($signed({1'b0, dio}) + boffset)) & ((1 << width) - 1));
    disable MYHDL152_RETURN;
end
endfunction

function integer MYHDL97_get_bits;
    input [19-1:0] aleaf;
begin: MYHDL153_RETURN
    MYHDL97_get_bits = ($signed({1'b0, aleaf}) & ((1 << 4) - 1));
    disable MYHDL153_RETURN;
end
endfunction

function integer MYHDL98_get4;
    input boffset;
    input width;
    integer width;
begin: MYHDL154_RETURN
    MYHDL98_get4 = ((b41 >>> (dio + boffset)) & ((1 << width) - 1));
    disable MYHDL154_RETURN;
end
endfunction

function integer MYHDL99_get_code;
    input [19-1:0] aleaf;
begin: MYHDL155_RETURN
    MYHDL99_get_code = (aleaf >>> 4);
    disable MYHDL155_RETURN;
end
endfunction

function integer MYHDL100_get_bits;
    input [19-1:0] aleaf;
begin: MYHDL156_RETURN
    MYHDL100_get_bits = ($signed({1'b0, aleaf}) & ((1 << 4) - 1));
    disable MYHDL156_RETURN;
end
endfunction

function integer MYHDL101_get4;
    input boffset;
    integer boffset;
    input width;
    integer width;
begin: MYHDL157_RETURN
    MYHDL101_get4 = ($signed($signed({1'b0, b41}) >>> ($signed({1'b0, dio}) + boffset)) & ((1 << width) - 1));
    disable MYHDL157_RETURN;
end
endfunction

function integer MYHDL102_get_bits;
    input [19-1:0] aleaf;
begin: MYHDL158_RETURN
    MYHDL102_get_bits = ($signed({1'b0, aleaf}) & ((1 << 4) - 1));
    disable MYHDL158_RETURN;
end
endfunction

task MYHDL103_adv;
    input width;
    integer width;
    integer nshift;
begin: MYHDL159_RETURN
    if ((!1'b1)) begin
        $finish;
    end
    nshift = $signed(($signed({1'b0, dio}) + width) >>> 3);
    o_iprogress <= di;
    dio <= (($signed({1'b0, dio}) + width) & 7);
    di <= ($signed({1'b0, di}) + nshift);
    if ((nshift != 0)) begin
        filled <= 1'b0;
    end
end
endtask

function integer MYHDL104_get4;
    input boffset;
    input width;
    integer width;
begin: MYHDL160_RETURN
    MYHDL104_get4 = ((b41 >>> (dio + boffset)) & ((1 << width) - 1));
    disable MYHDL160_RETURN;
end
endfunction

function integer MYHDL105_get4;
    input boffset;
    integer boffset;
    input width;
    integer width;
begin: MYHDL161_RETURN
    MYHDL105_get4 = ($signed($signed({1'b0, b41}) >>> ($signed({1'b0, dio}) + boffset)) & ((1 << width) - 1));
    disable MYHDL161_RETURN;
end
endfunction

function integer MYHDL106_rev_bits;
    input b;
    integer b;
    input nb;
    integer nb;
    integer r;
begin: MYHDL162_RETURN
    if ((b >= (1 << nb))) begin
        $finish;
        $write("too few bits");
        $write("\n");
    end
    if ((nb > 15)) begin
        $finish;
    end
    r = (((((((((((((((((b >>> 14) & 1) << 0) | (((b >>> 13) & 1) << 1)) | (((b >>> 12) & 1) << 2)) | (((b >>> 11) & 1) << 3)) | (((b >>> 10) & 1) << 4)) | (((b >>> 9) & 1) << 5)) | (((b >>> 8) & 1) << 6)) | (((b >>> 7) & 1) << 7)) | (((b >>> 6) & 1) << 8)) | (((b >>> 5) & 1) << 9)) | (((b >>> 4) & 1) << 10)) | (((b >>> 3) & 1) << 11)) | (((b >>> 2) & 1) << 12)) | (((b >>> 1) & 1) << 13)) | (((b >>> 0) & 1) << 14));
    r = r >>> (15 - $signed({1'b0, nb}));
    MYHDL106_rev_bits = r;
    disable MYHDL162_RETURN;
end
endfunction

function integer MYHDL107_get4;
    input boffset;
    integer boffset;
    input width;
    integer width;
begin: MYHDL163_RETURN
    MYHDL107_get4 = ($signed($signed({1'b0, b41}) >>> ($signed({1'b0, dio}) + boffset)) & ((1 << width) - 1));
    disable MYHDL163_RETURN;
end
endfunction

task MYHDL108_adv;
    input width;
    integer width;
    integer nshift;
begin: MYHDL164_RETURN
    if ((!1'b1)) begin
        $finish;
    end
    nshift = $signed(($signed({1'b0, dio}) + width) >>> 3);
    o_iprogress <= di;
    dio <= (($signed({1'b0, dio}) + width) & 7);
    di <= ($signed({1'b0, di}) + nshift);
    if ((nshift != 0)) begin
        filled <= 1'b0;
    end
end
endtask


always @(posedge clk) begin: DEFLATE_BRAMWRITE
    oram[oaddr] <= obyte;
    if (1'b1) begin
        leaves[lwaddr] <= wleaf;
        d_leaves[dlwaddr] <= dwleaf;
    end
end


always @(posedge clk) begin: DEFLATE_BRAMREAD
    orbyte <= oram[oraddr];
end


always @(posedge clk) begin: DEFLATE_RLEAFREAD
    rleaf <= leaves[lraddr];
    drleaf <= d_leaves[dlraddr];
end



assign smatch[0] = ((({cwindow, b1, b2} >>> (8 * 0)) & 16777215) == (b14 >>> 8));



assign smatch[1] = ((({cwindow, b1, b2} >>> (8 * 1)) & 16777215) == (b14 >>> 8));



assign smatch[2] = ((({cwindow, b1, b2} >>> (8 * 2)) & 16777215) == (b14 >>> 8));



assign smatch[3] = ((({cwindow, b1, b2} >>> (8 * 3)) & 16777215) == (b14 >>> 8));



assign smatch[4] = ((({cwindow, b1, b2} >>> (8 * 4)) & 16777215) == (b14 >>> 8));



assign smatch[5] = ((({cwindow, b1, b2} >>> (8 * 5)) & 16777215) == (b14 >>> 8));



assign smatch[6] = ((({cwindow, b1, b2} >>> (8 * 6)) & 16777215) == (b14 >>> 8));



assign smatch[7] = ((({cwindow, b1, b2} >>> (8 * 7)) & 16777215) == (b14 >>> 8));



assign smatch[8] = ((({cwindow, b1, b2} >>> (8 * 8)) & 16777215) == (b14 >>> 8));



assign smatch[9] = ((({cwindow, b1, b2} >>> (8 * 9)) & 16777215) == (b14 >>> 8));



assign smatch[10] = ((({cwindow, b1, b2} >>> (8 * 10)) & 16777215) == (b14 >>> 8));



assign smatch[11] = ((({cwindow, b1, b2} >>> (8 * 11)) & 16777215) == (b14 >>> 8));



assign smatch[12] = ((({cwindow, b1, b2} >>> (8 * 12)) & 16777215) == (b14 >>> 8));



assign smatch[13] = ((({cwindow, b1, b2} >>> (8 * 13)) & 16777215) == (b14 >>> 8));



assign smatch[14] = ((({cwindow, b1, b2} >>> (8 * 14)) & 16777215) == (b14 >>> 8));



assign smatch[15] = ((({cwindow, b1, b2} >>> (8 * 15)) & 16777215) == (b14 >>> 8));



assign smatch[16] = ((({cwindow, b1, b2} >>> (8 * 16)) & 16777215) == (b14 >>> 8));



assign smatch[17] = ((({cwindow, b1, b2} >>> (8 * 17)) & 16777215) == (b14 >>> 8));



assign smatch[18] = ((({cwindow, b1, b2} >>> (8 * 18)) & 16777215) == (b14 >>> 8));



assign smatch[19] = ((({cwindow, b1, b2} >>> (8 * 19)) & 16777215) == (b14 >>> 8));



assign smatch[20] = ((({cwindow, b1, b2} >>> (8 * 20)) & 16777215) == (b14 >>> 8));



assign smatch[21] = ((({cwindow, b1, b2} >>> (8 * 21)) & 16777215) == (b14 >>> 8));



assign smatch[22] = ((({cwindow, b1, b2} >>> (8 * 22)) & 16777215) == (b14 >>> 8));



assign smatch[23] = ((({cwindow, b1, b2} >>> (8 * 23)) & 16777215) == (b14 >>> 8));



assign smatch[24] = ((({cwindow, b1, b2} >>> (8 * 24)) & 16777215) == (b14 >>> 8));



assign smatch[25] = ((({cwindow, b1, b2} >>> (8 * 25)) & 16777215) == (b14 >>> 8));



assign smatch[26] = ((({cwindow, b1, b2} >>> (8 * 26)) & 16777215) == (b14 >>> 8));



assign smatch[27] = ((({cwindow, b1, b2} >>> (8 * 27)) & 16777215) == (b14 >>> 8));



assign smatch[28] = ((({cwindow, b1, b2} >>> (8 * 28)) & 16777215) == (b14 >>> 8));



assign smatch[29] = ((({cwindow, b1, b2} >>> (8 * 29)) & 16777215) == (b14 >>> 8));



assign smatch[30] = ((({cwindow, b1, b2} >>> (8 * 30)) & 16777215) == (b14 >>> 8));



assign smatch[31] = ((({cwindow, b1, b2} >>> (8 * 31)) & 16777215) == (b14 >>> 8));


always @(posedge clk) begin: DEFLATE_FILL_BUF
    integer shift;
    reg [8-1:0] rb;
    if (reset) begin
        $write("FILL RESET");
        $write("\n");
        nb <= 0;
    end
    else begin
        if ((isize < 4)) begin
            nb <= 0;
            if (1'b1) begin
                old_di <= 0;
            end
        end
        else if (((i_mode == 4) || (i_mode == 5))) begin
            nb <= 0;
            if (1'b1) begin
                old_di <= 0;
            end
        end
        else begin
            // if do_compress:
            //     print("FILL", di, old_di, nb, b1, b2, b3, b4)
            if (1'b1) begin
                shift = (($signed({1'b0, di}) - $signed({1'b0, old_di})) * 8);
                // if shift != 0:
                //     print("shift", shift, cwindow, b1, b2, b3, b4)
                if (1'b1) begin
                    cwindow <= (($signed({1'b0, cwindow}) << shift) | $signed($signed({1'b0, b110}) >>> (80 - shift)));
                end
                else begin
                    cwindow <= (($signed({1'b0, cwindow}) << shift) | $signed($signed({1'b0, b15}) >>> (40 - shift)));
                end
            end
            if ((!1'b0)) begin
                b1 <= iram[(di & 511)];
                b2 <= iram[((di + 1) & 511)];
                b3 <= iram[((di + 2) & 511)];
            end
            if ((old_di == di)) begin
                // if fcount < 9:
                //     print("fcount", fcount)
                rb = irbyte;
                if (1'b0) begin
                    if ((fcount >= 4)) begin
                        nb <= 1'b1;
                    end
                end
                else begin
                    rb = iram[((di + fcount) & 511)];
                    nb <= 1'b1;
                end
                if (1'b0) begin
                    fcount <= rcount;
                    case (rcount)
                        'h1: begin
                            b1 <= rb;
                        end
                        'h2: begin
                            b2 <= rb;
                        end
                        'h3: begin
                            b3 <= rb;
                        end
                        'h4: begin
                            b4 <= rb;
                        end
                        'h5: begin
                            b5 <= rb;
                        end
                    endcase
                    if ((rcount < 5)) begin
                        rcount <= (rcount + 1);
                    end
                end
                else if ((fcount == 4)) begin
                    b5 <= rb;
                    fcount <= 5;
                end
                else if (1'b1) begin
                    case (fcount)
                        'h5: begin
                            b6 <= rb;
                        end
                        'h6: begin
                            b7 <= rb;
                        end
                        'h7: begin
                            b8 <= rb;
                        end
                        'h8: begin
                            b9 <= rb;
                        end
                        'h9: begin
                            b10 <= rb;
                        end
                    endcase
                    if ((fcount < 10)) begin
                        fcount <= (fcount + 1);
                    end
                end
            end
            else begin
                if (1'b0) begin
                    rcount <= 0;
                    fcount <= 0;
                end
                else begin
                    fcount <= 4;
                    b4 <= iram[((di + 3) & 511)];
                end
            end
            old_di <= di;
        end
    end
end


always @(posedge clk) begin: DEFLATE_IO_LOGIC
    o_byte <= oram[(i_raddr & 511)];
    if ((i_mode == 2)) begin
        iram[(i_waddr & 511)] <= i_data;
        isize <= i_waddr;
    end
end


always @(posedge clk) begin: DEFLATE_LOGIC
    integer hm;
    integer skip;
    integer cs_i;
    reg [4-1:0] outlen;
    integer outbits;
    reg [8-1:0] bdata;
    integer adler1_next;
    integer lencode;
    integer nextdist;
    integer copydist;
    integer extra_dist;
    integer extra_bits;
    integer outcode;
    reg [10-1:0] lfmatch;
    integer distance;
    integer fmatch2;
    integer match;
    reg mdone;
    reg found;
    integer fmatch;
    integer si;
    integer mlimit;
    reg [8-1:0] cbyte;
    integer stat_i;
    integer clo_i;
    integer n_adv;
    integer dbl;
    integer dist_i;
    integer limit;
    reg [4-1:0] j;
    integer t;
    integer hf2_i;
    reg [4-1:0] amb;
    integer ncode;
    reg [16-1:0] canonical;
    reg [4-1:0] bits_next;
    reg [15-1:0] aim;
    integer cto;
    integer mask;
    reg [19-1:0] the_leaf;
    integer token;
    integer extraLength;
    integer tlength;
    integer distanceCode;
    integer moreBits;
    integer mored;
    if (reset) begin
        $write("DEFLATE RESET");
        $write("\n");
        state <= 5'b00000;
        o_done <= 1'b0;
    end
    else begin
        case (state)
            5'b00000: begin
                if ((1'b1 && (i_mode == 4))) begin
                    $write("STARTC");
                    $write("\n");
                    do_compress <= 1'b1;
                    o_done <= 1'b0;
                    o_iprogress <= 0;
                    o_oprogress <= 0;
                    di <= 0;
                    dio <= 0;
                    do <= 0;
                    doo <= 0;
                    filled <= 1'b1;
                    cur_static <= 0;
                    cur_cstatic <= 0;
                    state <= 5'b01110;
                end
                else if ((1'b1 && (i_mode == 5))) begin
                    maxBits <= 9;
                    instantMaxBit <= 9;
                    prev_method <= 3;
                    do_compress <= 1'b0;
                    o_done <= 1'b0;
                    o_iprogress <= 0;
                    o_oprogress <= 0;
                    di <= 2;
                    dio <= 0;
                    do <= 0;
                    doo <= 0;
                    filled <= 1'b1;
                    first_block <= 1'b1;
                    state <= 5'b00001;
                end
                else begin
                    // pass
                end
            end
            5'b00001: begin
                if ((!1'b1)) begin
                    // pass
                end
                else if ((!filled)) begin
                    filled <= 1'b1;
                end
                else if ((!nb)) begin
                    // pass
                end
                else if ((1'b0 && first_block)) begin
                    first_block <= 1'b0;
                    if ((b1 == 120)) begin
                        $write("deflate mode");
                        $write("\n");
                    end
                    else begin
                        $write("%h", di);
                        $write(" ");
                        $write("%h", dio);
                        $write(" ");
                        $write("%h", nb);
                        $write(" ");
                        $write("%h", b1);
                        $write(" ");
                        $write("%h", b2);
                        $write(" ");
                        $write("%h", b3);
                        $write(" ");
                        $write("%h", b4);
                        $write(" ");
                        $write("%h", isize);
                        $write("\n");
                        $finish;
                        o_done <= 1'b1;
                        state <= 5'b00000;
                    end
                end
                else begin
                    if ((!1'b0)) begin
                        if (MYHDL39_get4(0, 1)) begin
                            $write("final");
                            $write("\n");
                            final <= 1'b1;
                        end
                        else begin
                            final <= 1'b0;
                        end
                    end
                    if (1'b1) begin
                        hm = MYHDL40_get4(1, 2);
                        method <= hm;
                        $write("method");
                        $write(" ");
                        $write("%0d", hm);
                        $write("\n");
                        case (hm)
                            'h2: begin
                                if ((!1'b1)) begin
                                    $write("dynamic tree mode disabled");
                                    $write("\n");
                                    $finish;
                                end
                                state <= 5'b00010;
                                numCodeLength <= 0;
                                numLiterals <= 0;
                                static <= 1'b0;
                                MYHDL41_adv(3);
                            end
                            'h1: begin
                                static <= 1'b1;
                                cur_static <= 0;
                                $write("prev method is");
                                $write(" ");
                                $write("%h", prev_method);
                                $write("\n");
                                if ((prev_method == 1)) begin
                                    $write("skip HF init");
                                    $write("\n");
                                    state <= 5'b10011;
                                    cur_next <= 0;
                                end
                                else begin
                                    state <= 5'b01110;
                                end
                                MYHDL42_adv(3);
                            end
                            'h0: begin
                                state <= 5'b10101;
                                skip = (8 - dio);
                                if ((skip <= 2)) begin
                                    skip = (16 - dio);
                                end
                                length <= MYHDL43_get4(skip, 16);
                                MYHDL44_adv((skip + 16));
                                cur_i <= 0;
                                offset <= 7;
                            end
                            default: begin
                                state <= 5'b00000;
                                $write("Bad method");
                                $write("\n");
                                $finish;
                            end
                        endcase
                        prev_method <= hm;
                        $write("set prev");
                        $write(" ");
                        $write("%0d", hm);
                        $write("\n");
                    end
                    else begin
                        method <= 1;
                        cur_next <= 0;
                        if (1'b0) begin
                            dio <= 3;
                        end
                        else begin
                            MYHDL45_adv(3);
                        end
                        state <= 5'b10011;
                    end
                end
            end
            5'b10110: begin
                if ((!1'b1)) begin
                    // pass
                end
                else if ((!nb)) begin
                    // pass
                end
                else if (((!1'b1) && (!filled))) begin
                    filled <= 1'b1;
                end
                else if ((1'b0 && (fcount == 0))) begin
                    // pass
                end
                else if ((cur_cstatic == 0)) begin
                    flush <= 1'b0;
                    ob1 <= 0;
                    adler1 <= 1;
                    adler2 <= 0;
                    ladler1 <= 0;
                    oaddr <= 0;
                    obyte <= 120;
                    cur_cstatic <= 1;
                end
                else if ((cur_cstatic == 1)) begin
                    oaddr <= 1;
                    obyte <= 156;
                    do <= 2;
                    cur_cstatic <= 2;
                end
                else if ((cur_cstatic == 2)) begin
                    MYHDL46_put(3, 3);
                    cur_cstatic <= 3;
                end
                else if (flush) begin
                    oaddr <= do;
                    obyte <= ob1;
                    MYHDL47_do_flush;
                end
                else if ((($signed({1'b0, di}) >= ($signed({1'b0, isize}) - 10)) && (i_mode != 0))) begin
                    $write("P");
                    $write(" ");
                    $write("%h", di);
                    $write(" ");
                    $write("%h", isize);
                    $write("\n");
                    // pass
                end
                else if ((di > isize)) begin
                    case (cur_cstatic)
                        'h3: begin
                            cur_cstatic <= 4;
                            $write("Put EOF");
                            $write(" ");
                            $write("%h", do);
                            $write("\n");
                            cs_i = 256;
                            outlen = codeLength[cs_i];
                            case (cs_i)
                                0: outbits = 12;
                                1: outbits = 140;
                                2: outbits = 76;
                                3: outbits = 204;
                                4: outbits = 44;
                                5: outbits = 172;
                                6: outbits = 108;
                                7: outbits = 236;
                                8: outbits = 28;
                                9: outbits = 156;
                                10: outbits = 92;
                                11: outbits = 220;
                                12: outbits = 60;
                                13: outbits = 188;
                                14: outbits = 124;
                                15: outbits = 252;
                                16: outbits = 2;
                                17: outbits = 130;
                                18: outbits = 66;
                                19: outbits = 194;
                                20: outbits = 34;
                                21: outbits = 162;
                                22: outbits = 98;
                                23: outbits = 226;
                                24: outbits = 18;
                                25: outbits = 146;
                                26: outbits = 82;
                                27: outbits = 210;
                                28: outbits = 50;
                                29: outbits = 178;
                                30: outbits = 114;
                                31: outbits = 242;
                                32: outbits = 10;
                                33: outbits = 138;
                                34: outbits = 74;
                                35: outbits = 202;
                                36: outbits = 42;
                                37: outbits = 170;
                                38: outbits = 106;
                                39: outbits = 234;
                                40: outbits = 26;
                                41: outbits = 154;
                                42: outbits = 90;
                                43: outbits = 218;
                                44: outbits = 58;
                                45: outbits = 186;
                                46: outbits = 122;
                                47: outbits = 250;
                                48: outbits = 6;
                                49: outbits = 134;
                                50: outbits = 70;
                                51: outbits = 198;
                                52: outbits = 38;
                                53: outbits = 166;
                                54: outbits = 102;
                                55: outbits = 230;
                                56: outbits = 22;
                                57: outbits = 150;
                                58: outbits = 86;
                                59: outbits = 214;
                                60: outbits = 54;
                                61: outbits = 182;
                                62: outbits = 118;
                                63: outbits = 246;
                                64: outbits = 14;
                                65: outbits = 142;
                                66: outbits = 78;
                                67: outbits = 206;
                                68: outbits = 46;
                                69: outbits = 174;
                                70: outbits = 110;
                                71: outbits = 238;
                                72: outbits = 30;
                                73: outbits = 158;
                                74: outbits = 94;
                                75: outbits = 222;
                                76: outbits = 62;
                                77: outbits = 190;
                                78: outbits = 126;
                                79: outbits = 254;
                                80: outbits = 1;
                                81: outbits = 129;
                                82: outbits = 65;
                                83: outbits = 193;
                                84: outbits = 33;
                                85: outbits = 161;
                                86: outbits = 97;
                                87: outbits = 225;
                                88: outbits = 17;
                                89: outbits = 145;
                                90: outbits = 81;
                                91: outbits = 209;
                                92: outbits = 49;
                                93: outbits = 177;
                                94: outbits = 113;
                                95: outbits = 241;
                                96: outbits = 9;
                                97: outbits = 137;
                                98: outbits = 73;
                                99: outbits = 201;
                                100: outbits = 41;
                                101: outbits = 169;
                                102: outbits = 105;
                                103: outbits = 233;
                                104: outbits = 25;
                                105: outbits = 153;
                                106: outbits = 89;
                                107: outbits = 217;
                                108: outbits = 57;
                                109: outbits = 185;
                                110: outbits = 121;
                                111: outbits = 249;
                                112: outbits = 5;
                                113: outbits = 133;
                                114: outbits = 69;
                                115: outbits = 197;
                                116: outbits = 37;
                                117: outbits = 165;
                                118: outbits = 101;
                                119: outbits = 229;
                                120: outbits = 21;
                                121: outbits = 149;
                                122: outbits = 85;
                                123: outbits = 213;
                                124: outbits = 53;
                                125: outbits = 181;
                                126: outbits = 117;
                                127: outbits = 245;
                                128: outbits = 13;
                                129: outbits = 141;
                                130: outbits = 77;
                                131: outbits = 205;
                                132: outbits = 45;
                                133: outbits = 173;
                                134: outbits = 109;
                                135: outbits = 237;
                                136: outbits = 29;
                                137: outbits = 157;
                                138: outbits = 93;
                                139: outbits = 221;
                                140: outbits = 61;
                                141: outbits = 189;
                                142: outbits = 125;
                                143: outbits = 253;
                                144: outbits = 19;
                                145: outbits = 275;
                                146: outbits = 147;
                                147: outbits = 403;
                                148: outbits = 83;
                                149: outbits = 339;
                                150: outbits = 211;
                                151: outbits = 467;
                                152: outbits = 51;
                                153: outbits = 307;
                                154: outbits = 179;
                                155: outbits = 435;
                                156: outbits = 115;
                                157: outbits = 371;
                                158: outbits = 243;
                                159: outbits = 499;
                                160: outbits = 11;
                                161: outbits = 267;
                                162: outbits = 139;
                                163: outbits = 395;
                                164: outbits = 75;
                                165: outbits = 331;
                                166: outbits = 203;
                                167: outbits = 459;
                                168: outbits = 43;
                                169: outbits = 299;
                                170: outbits = 171;
                                171: outbits = 427;
                                172: outbits = 107;
                                173: outbits = 363;
                                174: outbits = 235;
                                175: outbits = 491;
                                176: outbits = 27;
                                177: outbits = 283;
                                178: outbits = 155;
                                179: outbits = 411;
                                180: outbits = 91;
                                181: outbits = 347;
                                182: outbits = 219;
                                183: outbits = 475;
                                184: outbits = 59;
                                185: outbits = 315;
                                186: outbits = 187;
                                187: outbits = 443;
                                188: outbits = 123;
                                189: outbits = 379;
                                190: outbits = 251;
                                191: outbits = 507;
                                192: outbits = 7;
                                193: outbits = 263;
                                194: outbits = 135;
                                195: outbits = 391;
                                196: outbits = 71;
                                197: outbits = 327;
                                198: outbits = 199;
                                199: outbits = 455;
                                200: outbits = 39;
                                201: outbits = 295;
                                202: outbits = 167;
                                203: outbits = 423;
                                204: outbits = 103;
                                205: outbits = 359;
                                206: outbits = 231;
                                207: outbits = 487;
                                208: outbits = 23;
                                209: outbits = 279;
                                210: outbits = 151;
                                211: outbits = 407;
                                212: outbits = 87;
                                213: outbits = 343;
                                214: outbits = 215;
                                215: outbits = 471;
                                216: outbits = 55;
                                217: outbits = 311;
                                218: outbits = 183;
                                219: outbits = 439;
                                220: outbits = 119;
                                221: outbits = 375;
                                222: outbits = 247;
                                223: outbits = 503;
                                224: outbits = 15;
                                225: outbits = 271;
                                226: outbits = 143;
                                227: outbits = 399;
                                228: outbits = 79;
                                229: outbits = 335;
                                230: outbits = 207;
                                231: outbits = 463;
                                232: outbits = 47;
                                233: outbits = 303;
                                234: outbits = 175;
                                235: outbits = 431;
                                236: outbits = 111;
                                237: outbits = 367;
                                238: outbits = 239;
                                239: outbits = 495;
                                240: outbits = 31;
                                241: outbits = 287;
                                242: outbits = 159;
                                243: outbits = 415;
                                244: outbits = 95;
                                245: outbits = 351;
                                246: outbits = 223;
                                247: outbits = 479;
                                248: outbits = 63;
                                249: outbits = 319;
                                250: outbits = 191;
                                251: outbits = 447;
                                252: outbits = 127;
                                253: outbits = 383;
                                254: outbits = 255;
                                255: outbits = 511;
                                256: outbits = 0;
                                257: outbits = 64;
                                258: outbits = 32;
                                259: outbits = 96;
                                260: outbits = 16;
                                261: outbits = 80;
                                262: outbits = 48;
                                263: outbits = 112;
                                264: outbits = 8;
                                265: outbits = 72;
                                266: outbits = 40;
                                267: outbits = 104;
                                268: outbits = 24;
                                269: outbits = 88;
                                270: outbits = 56;
                                271: outbits = 120;
                                272: outbits = 4;
                                273: outbits = 68;
                                274: outbits = 36;
                                275: outbits = 100;
                                276: outbits = 20;
                                277: outbits = 84;
                                278: outbits = 52;
                                279: outbits = 116;
                                280: outbits = 3;
                                281: outbits = 131;
                                282: outbits = 67;
                                283: outbits = 195;
                                284: outbits = 35;
                                285: outbits = 163;
                                286: outbits = 99;
                                default: outbits = 227;
                            endcase
                            $write("EOF BITS:");
                            $write(" ");
                            $write("%0d", cs_i);
                            $write(" ");
                            $write("%h", outlen);
                            $write(" ");
                            $write("%0d", outbits);
                            $write("\n");
                            MYHDL48_put(outbits, outlen);
                        end
                        'h4: begin
                            cur_cstatic <= 5;
                            $write("calc end adler");
                            $write("\n");
                            adler2 <= ((adler2 + ladler1) % 65521);
                            if ((doo != 0)) begin
                                oaddr <= do;
                                obyte <= ob1;
                                do <= (do + 1);
                            end
                        end
                        'h5: begin
                            cur_cstatic <= 6;
                            $write("c1");
                            $write(" ");
                            $write("%h", adler2);
                            $write("\n");
                            oaddr <= do;
                            obyte <= (adler2 >>> 8);
                            do <= (do + 1);
                            o_oprogress <= (do + 1);
                        end
                        'h6: begin
                            cur_cstatic <= 7;
                            $write("c2");
                            $write("\n");
                            oaddr <= do;
                            obyte <= (adler2 & 255);
                            do <= (do + 1);
                            o_oprogress <= (do + 1);
                        end
                        'h7: begin
                            cur_cstatic <= 8;
                            $write("c3");
                            $write(" ");
                            $write("%h", adler1);
                            $write("\n");
                            oaddr <= do;
                            obyte <= (adler1 >>> 8);
                            do <= (do + 1);
                            o_oprogress <= (do + 1);
                        end
                        'h8: begin
                            cur_cstatic <= 9;
                            $write("c4");
                            $write("\n");
                            oaddr <= do;
                            obyte <= (adler1 & 255);
                            o_oprogress <= (do + 1);
                        end
                        'h9: begin
                            cur_cstatic <= 10;
                            $write("EOF finish");
                            $write(" ");
                            $write("%h", do);
                            $write("\n");
                            o_done <= 1'b1;
                            state <= 5'b00000;
                        end
                        default: begin
                            $write("%h", cur_cstatic);
                            $write(" ");
                            $write("%h", isize);
                            $write("\n");
                            $finish;
                        end
                    endcase
                end
                else begin
                    bdata = iram[(di & 511)];
                    o_iprogress <= di;
                    adler1_next = ((adler1 + bdata) % 65521);
                    adler1 <= adler1_next;
                    adler2 <= ((adler2 + ladler1) % 65521);
                    ladler1 <= adler1_next;
                    state <= 5'b10111;
                    cur_search <= (di - 1);
                end
            end
            5'b11010: begin
                if ((!1'b1)) begin
                    // pass
                end
                else if (flush) begin
                    MYHDL49_do_flush;
                end
                else if (do_init) begin
                    do_init <= 1'b0;
                    outcarrybits <= 0;
                    lencode = (mlength + 254);
                    outlen = codeLength[lencode];
                    case (lencode)
                        0: outbits = 12;
                        1: outbits = 140;
                        2: outbits = 76;
                        3: outbits = 204;
                        4: outbits = 44;
                        5: outbits = 172;
                        6: outbits = 108;
                        7: outbits = 236;
                        8: outbits = 28;
                        9: outbits = 156;
                        10: outbits = 92;
                        11: outbits = 220;
                        12: outbits = 60;
                        13: outbits = 188;
                        14: outbits = 124;
                        15: outbits = 252;
                        16: outbits = 2;
                        17: outbits = 130;
                        18: outbits = 66;
                        19: outbits = 194;
                        20: outbits = 34;
                        21: outbits = 162;
                        22: outbits = 98;
                        23: outbits = 226;
                        24: outbits = 18;
                        25: outbits = 146;
                        26: outbits = 82;
                        27: outbits = 210;
                        28: outbits = 50;
                        29: outbits = 178;
                        30: outbits = 114;
                        31: outbits = 242;
                        32: outbits = 10;
                        33: outbits = 138;
                        34: outbits = 74;
                        35: outbits = 202;
                        36: outbits = 42;
                        37: outbits = 170;
                        38: outbits = 106;
                        39: outbits = 234;
                        40: outbits = 26;
                        41: outbits = 154;
                        42: outbits = 90;
                        43: outbits = 218;
                        44: outbits = 58;
                        45: outbits = 186;
                        46: outbits = 122;
                        47: outbits = 250;
                        48: outbits = 6;
                        49: outbits = 134;
                        50: outbits = 70;
                        51: outbits = 198;
                        52: outbits = 38;
                        53: outbits = 166;
                        54: outbits = 102;
                        55: outbits = 230;
                        56: outbits = 22;
                        57: outbits = 150;
                        58: outbits = 86;
                        59: outbits = 214;
                        60: outbits = 54;
                        61: outbits = 182;
                        62: outbits = 118;
                        63: outbits = 246;
                        64: outbits = 14;
                        65: outbits = 142;
                        66: outbits = 78;
                        67: outbits = 206;
                        68: outbits = 46;
                        69: outbits = 174;
                        70: outbits = 110;
                        71: outbits = 238;
                        72: outbits = 30;
                        73: outbits = 158;
                        74: outbits = 94;
                        75: outbits = 222;
                        76: outbits = 62;
                        77: outbits = 190;
                        78: outbits = 126;
                        79: outbits = 254;
                        80: outbits = 1;
                        81: outbits = 129;
                        82: outbits = 65;
                        83: outbits = 193;
                        84: outbits = 33;
                        85: outbits = 161;
                        86: outbits = 97;
                        87: outbits = 225;
                        88: outbits = 17;
                        89: outbits = 145;
                        90: outbits = 81;
                        91: outbits = 209;
                        92: outbits = 49;
                        93: outbits = 177;
                        94: outbits = 113;
                        95: outbits = 241;
                        96: outbits = 9;
                        97: outbits = 137;
                        98: outbits = 73;
                        99: outbits = 201;
                        100: outbits = 41;
                        101: outbits = 169;
                        102: outbits = 105;
                        103: outbits = 233;
                        104: outbits = 25;
                        105: outbits = 153;
                        106: outbits = 89;
                        107: outbits = 217;
                        108: outbits = 57;
                        109: outbits = 185;
                        110: outbits = 121;
                        111: outbits = 249;
                        112: outbits = 5;
                        113: outbits = 133;
                        114: outbits = 69;
                        115: outbits = 197;
                        116: outbits = 37;
                        117: outbits = 165;
                        118: outbits = 101;
                        119: outbits = 229;
                        120: outbits = 21;
                        121: outbits = 149;
                        122: outbits = 85;
                        123: outbits = 213;
                        124: outbits = 53;
                        125: outbits = 181;
                        126: outbits = 117;
                        127: outbits = 245;
                        128: outbits = 13;
                        129: outbits = 141;
                        130: outbits = 77;
                        131: outbits = 205;
                        132: outbits = 45;
                        133: outbits = 173;
                        134: outbits = 109;
                        135: outbits = 237;
                        136: outbits = 29;
                        137: outbits = 157;
                        138: outbits = 93;
                        139: outbits = 221;
                        140: outbits = 61;
                        141: outbits = 189;
                        142: outbits = 125;
                        143: outbits = 253;
                        144: outbits = 19;
                        145: outbits = 275;
                        146: outbits = 147;
                        147: outbits = 403;
                        148: outbits = 83;
                        149: outbits = 339;
                        150: outbits = 211;
                        151: outbits = 467;
                        152: outbits = 51;
                        153: outbits = 307;
                        154: outbits = 179;
                        155: outbits = 435;
                        156: outbits = 115;
                        157: outbits = 371;
                        158: outbits = 243;
                        159: outbits = 499;
                        160: outbits = 11;
                        161: outbits = 267;
                        162: outbits = 139;
                        163: outbits = 395;
                        164: outbits = 75;
                        165: outbits = 331;
                        166: outbits = 203;
                        167: outbits = 459;
                        168: outbits = 43;
                        169: outbits = 299;
                        170: outbits = 171;
                        171: outbits = 427;
                        172: outbits = 107;
                        173: outbits = 363;
                        174: outbits = 235;
                        175: outbits = 491;
                        176: outbits = 27;
                        177: outbits = 283;
                        178: outbits = 155;
                        179: outbits = 411;
                        180: outbits = 91;
                        181: outbits = 347;
                        182: outbits = 219;
                        183: outbits = 475;
                        184: outbits = 59;
                        185: outbits = 315;
                        186: outbits = 187;
                        187: outbits = 443;
                        188: outbits = 123;
                        189: outbits = 379;
                        190: outbits = 251;
                        191: outbits = 507;
                        192: outbits = 7;
                        193: outbits = 263;
                        194: outbits = 135;
                        195: outbits = 391;
                        196: outbits = 71;
                        197: outbits = 327;
                        198: outbits = 199;
                        199: outbits = 455;
                        200: outbits = 39;
                        201: outbits = 295;
                        202: outbits = 167;
                        203: outbits = 423;
                        204: outbits = 103;
                        205: outbits = 359;
                        206: outbits = 231;
                        207: outbits = 487;
                        208: outbits = 23;
                        209: outbits = 279;
                        210: outbits = 151;
                        211: outbits = 407;
                        212: outbits = 87;
                        213: outbits = 343;
                        214: outbits = 215;
                        215: outbits = 471;
                        216: outbits = 55;
                        217: outbits = 311;
                        218: outbits = 183;
                        219: outbits = 439;
                        220: outbits = 119;
                        221: outbits = 375;
                        222: outbits = 247;
                        223: outbits = 503;
                        224: outbits = 15;
                        225: outbits = 271;
                        226: outbits = 143;
                        227: outbits = 399;
                        228: outbits = 79;
                        229: outbits = 335;
                        230: outbits = 207;
                        231: outbits = 463;
                        232: outbits = 47;
                        233: outbits = 303;
                        234: outbits = 175;
                        235: outbits = 431;
                        236: outbits = 111;
                        237: outbits = 367;
                        238: outbits = 239;
                        239: outbits = 495;
                        240: outbits = 31;
                        241: outbits = 287;
                        242: outbits = 159;
                        243: outbits = 415;
                        244: outbits = 95;
                        245: outbits = 351;
                        246: outbits = 223;
                        247: outbits = 479;
                        248: outbits = 63;
                        249: outbits = 319;
                        250: outbits = 191;
                        251: outbits = 447;
                        252: outbits = 127;
                        253: outbits = 383;
                        254: outbits = 255;
                        255: outbits = 511;
                        256: outbits = 0;
                        257: outbits = 64;
                        258: outbits = 32;
                        259: outbits = 96;
                        260: outbits = 16;
                        261: outbits = 80;
                        262: outbits = 48;
                        263: outbits = 112;
                        264: outbits = 8;
                        265: outbits = 72;
                        266: outbits = 40;
                        267: outbits = 104;
                        268: outbits = 24;
                        269: outbits = 88;
                        270: outbits = 56;
                        271: outbits = 120;
                        272: outbits = 4;
                        273: outbits = 68;
                        274: outbits = 36;
                        275: outbits = 100;
                        276: outbits = 20;
                        277: outbits = 84;
                        278: outbits = 52;
                        279: outbits = 116;
                        280: outbits = 3;
                        281: outbits = 131;
                        282: outbits = 67;
                        283: outbits = 195;
                        284: outbits = 35;
                        285: outbits = 163;
                        286: outbits = 99;
                        default: outbits = 227;
                    endcase
                    MYHDL50_put(outbits, outlen);
                    cur_i <= 0;
                end
                else if (outcarrybits) begin
                    MYHDL51_put(outcarry, outcarrybits);
                    state <= 5'b11011;
                end
                else begin
                    case ((cur_i + 1))
                        0: nextdist = 1;
                        1: nextdist = 2;
                        2: nextdist = 3;
                        3: nextdist = 4;
                        4: nextdist = 5;
                        5: nextdist = 7;
                        6: nextdist = 9;
                        7: nextdist = 13;
                        8: nextdist = 17;
                        9: nextdist = 25;
                        10: nextdist = 33;
                        11: nextdist = 49;
                        12: nextdist = 65;
                        13: nextdist = 97;
                        14: nextdist = 129;
                        15: nextdist = 193;
                        16: nextdist = 257;
                        17: nextdist = 385;
                        18: nextdist = 513;
                        19: nextdist = 769;
                        20: nextdist = 1025;
                        21: nextdist = 1537;
                        22: nextdist = 2049;
                        23: nextdist = 3073;
                        24: nextdist = 4097;
                        25: nextdist = 6145;
                        26: nextdist = 8193;
                        27: nextdist = 12289;
                        28: nextdist = 16385;
                        default: nextdist = 24577;
                    endcase
                    if ((nextdist > cur_dist)) begin
                        case (cur_i)
                            0: copydist = 1;
                            1: copydist = 2;
                            2: copydist = 3;
                            3: copydist = 4;
                            4: copydist = 5;
                            5: copydist = 7;
                            6: copydist = 9;
                            7: copydist = 13;
                            8: copydist = 17;
                            9: copydist = 25;
                            10: copydist = 33;
                            11: copydist = 49;
                            12: copydist = 65;
                            13: copydist = 97;
                            14: copydist = 129;
                            15: copydist = 193;
                            16: copydist = 257;
                            17: copydist = 385;
                            18: copydist = 513;
                            19: copydist = 769;
                            20: copydist = 1025;
                            21: copydist = 1537;
                            22: copydist = 2049;
                            23: copydist = 3073;
                            24: copydist = 4097;
                            25: copydist = 6145;
                            26: copydist = 8193;
                            27: copydist = 12289;
                            28: copydist = 16385;
                            default: copydist = 24577;
                        endcase
                        extra_dist = (cur_dist - copydist);
                        case ((cur_i / 2))
                            0: extra_bits = 0;
                            1: extra_bits = 0;
                            2: extra_bits = 1;
                            3: extra_bits = 2;
                            4: extra_bits = 3;
                            5: extra_bits = 4;
                            6: extra_bits = 5;
                            7: extra_bits = 6;
                            8: extra_bits = 7;
                            9: extra_bits = 8;
                            10: extra_bits = 9;
                            11: extra_bits = 10;
                            12: extra_bits = 11;
                            13: extra_bits = 12;
                            default: extra_bits = 13;
                        endcase
                        if ((extra_dist > ((1 << extra_bits) - 1))) begin
                            $finish;
                        end
                        cur_i <= (($signed({1'b0, di}) - $signed({1'b0, mlength})) + 1);
                        outcode = (MYHDL52_rev_bits(cur_i, 5) | (extra_dist << 5));
                        if ((extra_bits <= 4)) begin
                            MYHDL53_put(outcode, (5 + extra_bits));
                            state <= 5'b11011;
                        end
                        else begin
                            outcarry <= $signed(outcode >>> 8);
                            outcarrybits <= (extra_bits - 3);
                            outcode = (outcode & 255);
                            MYHDL54_put(outcode, 8);
                        end
                    end
                    else begin
                        cur_i <= (cur_i + 1);
                    end
                end
            end
            5'b11011: begin
                if ((!1'b1)) begin
                    // pass
                end
                else if ((cur_i < di)) begin
                    bdata = iram[(cur_i & 511)];
                    adler1_next = ((adler1 + bdata) % 65521);
                    adler1 <= adler1_next;
                    adler2 <= ((adler2 + ladler1) % 65521);
                    ladler1 <= adler1_next;
                    cur_i <= (cur_i + 1);
                end
                else begin
                    state <= 5'b10110;
                end
            end
            5'b11001: begin
                if ((!(1'b1 && 1'b1))) begin
                    // pass
                end
                else begin
                    lfmatch = dlength;
                    distance = (lfmatch + 1);
                    fmatch2 = (($signed({1'b0, di}) - $signed({1'b0, lfmatch})) + 2);
                    match = 3;
                    mdone = 1'b1;
                    if ((($signed({1'b0, di}) < ($signed({1'b0, isize}) - 4)) && (iram[(fmatch2 & 511)] == b4))) begin
                        match = 4;
                        if ((fcount < 5)) begin
                            mdone = 1'b0;
                        end
                        else if ((($signed({1'b0, di}) < ($signed({1'b0, isize}) - 5)) && (iram[((fmatch2 + 1) & 511)] == b5))) begin
                            match = 5;
                            if (1'b1) begin
                                if ((fcount < 6)) begin
                                    mdone = 1'b0;
                                end
                                else if ((($signed({1'b0, di}) < ($signed({1'b0, isize}) - 6)) && (iram[((fmatch2 + 2) & 511)] == b6))) begin
                                    match = 6;
                                    if ((fcount < 7)) begin
                                        mdone = 1'b0;
                                    end
                                    else if ((($signed({1'b0, di}) < ($signed({1'b0, isize}) - 7)) && (iram[((fmatch2 + 3) & 511)] == b7))) begin
                                        match = 7;
                                        if ((fcount < 8)) begin
                                            mdone = 1'b0;
                                        end
                                        else if ((($signed({1'b0, di}) < ($signed({1'b0, isize}) - 8)) && (iram[((fmatch2 + 4) & 511)] == b8))) begin
                                            match = 8;
                                            if ((fcount < 9)) begin
                                                mdone = 1'b0;
                                            end
                                            else if ((($signed({1'b0, di}) < ($signed({1'b0, isize}) - 9)) && (iram[((fmatch2 + 5) & 511)] == b9))) begin
                                                match = 9;
                                                if ((fcount < 10)) begin
                                                    mdone = 1'b0;
                                                end
                                                else if ((($signed({1'b0, di}) < ($signed({1'b0, isize}) - 10)) && (iram[((fmatch2 + 6) & 511)] == b10))) begin
                                                    match = 10;
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                    if (mdone) begin
                        cur_dist <= distance;
                        do_init <= 1'b1;
                        di <= (di + match);
                        if ((!1'b1)) begin
                            filled <= 1'b0;
                        end
                        mlength <= match;
                        state <= 5'b11010;
                    end
                end
            end
            5'b10111: begin
                if ((!1'b1)) begin
                    // pass
                end
                else if ((1'b0 && (fcount < 3))) begin
                    // pass
                end
                else begin
                    if (((cur_search >= 0) && (cur_search >= ($signed({1'b0, di}) - 32)) && ($signed({1'b0, di}) < ($signed({1'b0, isize}) - 3)))) begin
                        if (1'b1) begin
                            found = 0;
                            fmatch = 0;
                            begin: MYHDL55_BREAK
                            for (si=0; si<32; si=si+1) begin
                                if (smatch[si]) begin
                                    fmatch = si;
                                    found = 1;
                                    disable MYHDL55_BREAK;
                                end
                            end
                            end
                            if (((!found) || ((($signed({1'b0, di}) - fmatch) - 1) < 0))) begin
                                cur_search <= (-1);
                            end
                            else begin
                                dlength <= fmatch;
                                state <= 5'b11001;
                            end
                        end
                        else if (((iram[(cur_search & 511)] == b1) && (iram[((cur_search + 1) & 511)] == b2) && (iram[((cur_search + 2) & 511)] == b3))) begin
                            more <= 4;
                            state <= 5'b11000;
                        end
                        else begin
                            cur_search <= (cur_search - 1);
                        end
                    end
                    else begin
                        bdata = b1;
                        di <= (di + 1);
                        if ((!1'b1)) begin
                            filled <= 1'b0;
                        end
                        outlen = codeLength[bdata];
                        case (bdata)
                            0: outbits = 12;
                            1: outbits = 140;
                            2: outbits = 76;
                            3: outbits = 204;
                            4: outbits = 44;
                            5: outbits = 172;
                            6: outbits = 108;
                            7: outbits = 236;
                            8: outbits = 28;
                            9: outbits = 156;
                            10: outbits = 92;
                            11: outbits = 220;
                            12: outbits = 60;
                            13: outbits = 188;
                            14: outbits = 124;
                            15: outbits = 252;
                            16: outbits = 2;
                            17: outbits = 130;
                            18: outbits = 66;
                            19: outbits = 194;
                            20: outbits = 34;
                            21: outbits = 162;
                            22: outbits = 98;
                            23: outbits = 226;
                            24: outbits = 18;
                            25: outbits = 146;
                            26: outbits = 82;
                            27: outbits = 210;
                            28: outbits = 50;
                            29: outbits = 178;
                            30: outbits = 114;
                            31: outbits = 242;
                            32: outbits = 10;
                            33: outbits = 138;
                            34: outbits = 74;
                            35: outbits = 202;
                            36: outbits = 42;
                            37: outbits = 170;
                            38: outbits = 106;
                            39: outbits = 234;
                            40: outbits = 26;
                            41: outbits = 154;
                            42: outbits = 90;
                            43: outbits = 218;
                            44: outbits = 58;
                            45: outbits = 186;
                            46: outbits = 122;
                            47: outbits = 250;
                            48: outbits = 6;
                            49: outbits = 134;
                            50: outbits = 70;
                            51: outbits = 198;
                            52: outbits = 38;
                            53: outbits = 166;
                            54: outbits = 102;
                            55: outbits = 230;
                            56: outbits = 22;
                            57: outbits = 150;
                            58: outbits = 86;
                            59: outbits = 214;
                            60: outbits = 54;
                            61: outbits = 182;
                            62: outbits = 118;
                            63: outbits = 246;
                            64: outbits = 14;
                            65: outbits = 142;
                            66: outbits = 78;
                            67: outbits = 206;
                            68: outbits = 46;
                            69: outbits = 174;
                            70: outbits = 110;
                            71: outbits = 238;
                            72: outbits = 30;
                            73: outbits = 158;
                            74: outbits = 94;
                            75: outbits = 222;
                            76: outbits = 62;
                            77: outbits = 190;
                            78: outbits = 126;
                            79: outbits = 254;
                            80: outbits = 1;
                            81: outbits = 129;
                            82: outbits = 65;
                            83: outbits = 193;
                            84: outbits = 33;
                            85: outbits = 161;
                            86: outbits = 97;
                            87: outbits = 225;
                            88: outbits = 17;
                            89: outbits = 145;
                            90: outbits = 81;
                            91: outbits = 209;
                            92: outbits = 49;
                            93: outbits = 177;
                            94: outbits = 113;
                            95: outbits = 241;
                            96: outbits = 9;
                            97: outbits = 137;
                            98: outbits = 73;
                            99: outbits = 201;
                            100: outbits = 41;
                            101: outbits = 169;
                            102: outbits = 105;
                            103: outbits = 233;
                            104: outbits = 25;
                            105: outbits = 153;
                            106: outbits = 89;
                            107: outbits = 217;
                            108: outbits = 57;
                            109: outbits = 185;
                            110: outbits = 121;
                            111: outbits = 249;
                            112: outbits = 5;
                            113: outbits = 133;
                            114: outbits = 69;
                            115: outbits = 197;
                            116: outbits = 37;
                            117: outbits = 165;
                            118: outbits = 101;
                            119: outbits = 229;
                            120: outbits = 21;
                            121: outbits = 149;
                            122: outbits = 85;
                            123: outbits = 213;
                            124: outbits = 53;
                            125: outbits = 181;
                            126: outbits = 117;
                            127: outbits = 245;
                            128: outbits = 13;
                            129: outbits = 141;
                            130: outbits = 77;
                            131: outbits = 205;
                            132: outbits = 45;
                            133: outbits = 173;
                            134: outbits = 109;
                            135: outbits = 237;
                            136: outbits = 29;
                            137: outbits = 157;
                            138: outbits = 93;
                            139: outbits = 221;
                            140: outbits = 61;
                            141: outbits = 189;
                            142: outbits = 125;
                            143: outbits = 253;
                            144: outbits = 19;
                            145: outbits = 275;
                            146: outbits = 147;
                            147: outbits = 403;
                            148: outbits = 83;
                            149: outbits = 339;
                            150: outbits = 211;
                            151: outbits = 467;
                            152: outbits = 51;
                            153: outbits = 307;
                            154: outbits = 179;
                            155: outbits = 435;
                            156: outbits = 115;
                            157: outbits = 371;
                            158: outbits = 243;
                            159: outbits = 499;
                            160: outbits = 11;
                            161: outbits = 267;
                            162: outbits = 139;
                            163: outbits = 395;
                            164: outbits = 75;
                            165: outbits = 331;
                            166: outbits = 203;
                            167: outbits = 459;
                            168: outbits = 43;
                            169: outbits = 299;
                            170: outbits = 171;
                            171: outbits = 427;
                            172: outbits = 107;
                            173: outbits = 363;
                            174: outbits = 235;
                            175: outbits = 491;
                            176: outbits = 27;
                            177: outbits = 283;
                            178: outbits = 155;
                            179: outbits = 411;
                            180: outbits = 91;
                            181: outbits = 347;
                            182: outbits = 219;
                            183: outbits = 475;
                            184: outbits = 59;
                            185: outbits = 315;
                            186: outbits = 187;
                            187: outbits = 443;
                            188: outbits = 123;
                            189: outbits = 379;
                            190: outbits = 251;
                            191: outbits = 507;
                            192: outbits = 7;
                            193: outbits = 263;
                            194: outbits = 135;
                            195: outbits = 391;
                            196: outbits = 71;
                            197: outbits = 327;
                            198: outbits = 199;
                            199: outbits = 455;
                            200: outbits = 39;
                            201: outbits = 295;
                            202: outbits = 167;
                            203: outbits = 423;
                            204: outbits = 103;
                            205: outbits = 359;
                            206: outbits = 231;
                            207: outbits = 487;
                            208: outbits = 23;
                            209: outbits = 279;
                            210: outbits = 151;
                            211: outbits = 407;
                            212: outbits = 87;
                            213: outbits = 343;
                            214: outbits = 215;
                            215: outbits = 471;
                            216: outbits = 55;
                            217: outbits = 311;
                            218: outbits = 183;
                            219: outbits = 439;
                            220: outbits = 119;
                            221: outbits = 375;
                            222: outbits = 247;
                            223: outbits = 503;
                            224: outbits = 15;
                            225: outbits = 271;
                            226: outbits = 143;
                            227: outbits = 399;
                            228: outbits = 79;
                            229: outbits = 335;
                            230: outbits = 207;
                            231: outbits = 463;
                            232: outbits = 47;
                            233: outbits = 303;
                            234: outbits = 175;
                            235: outbits = 431;
                            236: outbits = 111;
                            237: outbits = 367;
                            238: outbits = 239;
                            239: outbits = 495;
                            240: outbits = 31;
                            241: outbits = 287;
                            242: outbits = 159;
                            243: outbits = 415;
                            244: outbits = 95;
                            245: outbits = 351;
                            246: outbits = 223;
                            247: outbits = 479;
                            248: outbits = 63;
                            249: outbits = 319;
                            250: outbits = 191;
                            251: outbits = 447;
                            252: outbits = 127;
                            253: outbits = 383;
                            254: outbits = 255;
                            255: outbits = 511;
                            256: outbits = 0;
                            257: outbits = 64;
                            258: outbits = 32;
                            259: outbits = 96;
                            260: outbits = 16;
                            261: outbits = 80;
                            262: outbits = 48;
                            263: outbits = 112;
                            264: outbits = 8;
                            265: outbits = 72;
                            266: outbits = 40;
                            267: outbits = 104;
                            268: outbits = 24;
                            269: outbits = 88;
                            270: outbits = 56;
                            271: outbits = 120;
                            272: outbits = 4;
                            273: outbits = 68;
                            274: outbits = 36;
                            275: outbits = 100;
                            276: outbits = 20;
                            277: outbits = 84;
                            278: outbits = 52;
                            279: outbits = 116;
                            280: outbits = 3;
                            281: outbits = 131;
                            282: outbits = 67;
                            283: outbits = 195;
                            284: outbits = 35;
                            285: outbits = 163;
                            286: outbits = 99;
                            default: outbits = 227;
                        endcase
                        MYHDL57_put(outbits, outlen);
                        state <= 5'b10110;
                    end
                end
            end
            5'b11000: begin
                if (((!1'b1) || 1'b1)) begin
                    // pass
                end
                else begin
                    mdone = 1'b1;
                    mlimit = 5;
                    if (1'b1) begin
                        mlimit = 10;
                    end
                    if ((more <= mlimit)) begin
                        cbyte = b4;
                        if ((more == 5)) begin
                            cbyte = b5;
                        end
                        else if (1'b1) begin
                            case (more)
                                'h6: begin
                                    cbyte = b6;
                                end
                                'h7: begin
                                    cbyte = b7;
                                end
                                'h8: begin
                                    cbyte = b8;
                                end
                                'h9: begin
                                    cbyte = b9;
                                end
                                'ha: begin
                                    cbyte = b10;
                                end
                            endcase
                        end
                        if ((($signed({1'b0, di}) < ($signed({1'b0, isize}) - $signed({1'b0, more}))) && (iram[(((cur_search + $signed({1'b0, more})) - 1) & 511)] == cbyte))) begin
                            more <= (more + 1);
                            mdone = 1'b0;
                        end
                    end
                    if (mdone) begin
                        match = (more - 1);
                        distance = ($signed({1'b0, di}) - cur_search);
                        cur_dist <= distance;
                        do_init <= 1'b1;
                        di <= (di + match);
                        if ((!1'b1)) begin
                            filled <= 1'b0;
                        end
                        mlength <= match;
                        state <= 5'b11010;
                    end
                end
            end
            5'b01110: begin
                for (stat_i=0; stat_i<144; stat_i=stat_i+1) begin
                    codeLength[stat_i] <= 8;
                end
                for (stat_i=144; stat_i<256; stat_i=stat_i+1) begin
                    codeLength[stat_i] <= 9;
                end
                for (stat_i=256; stat_i<280; stat_i=stat_i+1) begin
                    codeLength[stat_i] <= 7;
                end
                for (stat_i=280; stat_i<288; stat_i=stat_i+1) begin
                    codeLength[stat_i] <= 8;
                end
                numCodeLength <= 288;
                if ((1'b1 && do_compress)) begin
                    state <= 5'b10110;
                end
                else if (1'b1) begin
                    cur_HF1 <= 0;
                    state <= 5'b00111;
                end
                else begin
                    cur_next <= 0;
                    state <= 5'b10011;
                end
            end
            5'b00010: begin
                if (((!1'b1) || (!1'b1))) begin
                    // pass
                end
                else if ((!filled)) begin
                    filled <= 1'b1;
                end
                else if ((numLiterals == 0)) begin
                    $write("%h", di);
                    $write(" ");
                    $write("%h", isize);
                    $write("\n");
                    numLiterals <= (257 + MYHDL66_get4(0, 5));
                    $write("NL:");
                    $write(" ");
                    $write("%0d", (257 + MYHDL67_get4(0, 5)));
                    $write("\n");
                    numDistance <= (1 + MYHDL68_get4(5, 5));
                    $write("ND:");
                    $write(" ");
                    $write("%0d", (1 + MYHDL69_get4(5, 5)));
                    $write("\n");
                    b_numCodeLength <= (4 + MYHDL70_get4(10, 4));
                    $write("NCL:");
                    $write(" ");
                    $write("%0d", (4 + MYHDL71_get4(10, 4)));
                    $write("\n");
                    numCodeLength <= 0;
                    MYHDL72_adv(14);
                end
                else begin
                    if ((numCodeLength < 19)) begin
                        case (numCodeLength)
                            0: clo_i = 16;
                            1: clo_i = 17;
                            2: clo_i = 18;
                            3: clo_i = 0;
                            4: clo_i = 8;
                            5: clo_i = 7;
                            6: clo_i = 9;
                            7: clo_i = 6;
                            8: clo_i = 10;
                            9: clo_i = 5;
                            10: clo_i = 11;
                            11: clo_i = 4;
                            12: clo_i = 12;
                            13: clo_i = 3;
                            14: clo_i = 13;
                            15: clo_i = 2;
                            16: clo_i = 14;
                            17: clo_i = 1;
                            default: clo_i = 15;
                        endcase
                        if ((numCodeLength < b_numCodeLength)) begin
                            codeLength[clo_i] <= MYHDL73_get4(0, 3);
                            MYHDL74_adv(3);
                        end
                        else begin
                            codeLength[clo_i] <= 0;
                        end
                        numCodeLength <= (numCodeLength + 1);
                    end
                    else begin
                        numCodeLength <= 19;
                        cur_HF1 <= 0;
                        state <= 5'b00111;
                    end
                end
            end
            5'b00011: begin
                if (((!1'b1) || (!1'b1))) begin
                    // pass
                end
                else if ((!filled)) begin
                    filled <= 1'b1;
                end
                else if ((numCodeLength < (numLiterals + numDistance))) begin
                    n_adv = 0;
                    if ((code < 16)) begin
                        howOften <= 1;
                        lastToken <= code;
                    end
                    else if ((code == 16)) begin
                        howOften <= (3 + MYHDL75_get4(0, 2));
                        n_adv = 2;
                    end
                    else if ((code == 17)) begin
                        howOften <= (3 + MYHDL76_get4(0, 3));
                        lastToken <= 0;
                        n_adv = 3;
                    end
                    else if ((code == 18)) begin
                        howOften <= (11 + MYHDL77_get4(0, 7));
                        lastToken <= 0;
                        n_adv = 7;
                    end
                    else begin
                        $finish;
                    end
                    if ((n_adv != 0)) begin
                        MYHDL78_adv(n_adv);
                    end
                    state <= 5'b00100;
                    spread_i <= 0;
                end
                else if ((spread_i < 32)) begin
                    if ((spread_i == 0)) begin
                        $write("FILL UP");
                        $write("\n");
                    end
                    dbl = 0;
                    if (((spread_i + numLiterals) < numCodeLength)) begin
                        dbl = codeLength[(spread_i + numLiterals)];
                    end
                    distanceLength[spread_i] <= dbl;
                    spread_i <= (spread_i + 1);
                end
                else begin
                    cur_i <= numLiterals;
                    state <= 5'b00110;
                end
            end
            5'b00110: begin
                if (((!1'b1) || (!1'b1))) begin
                    // pass
                end
                else if ((cur_i < 320)) begin
                    codeLength[cur_i] <= 0;
                    cur_i <= (cur_i + 1);
                end
                else begin
                    method <= 3;
                    cur_HF1 <= 0;
                    state <= 5'b00111;
                end
            end
            5'b00101: begin
                if ((1'b1 && 1'b1)) begin
                    $write("DISTTREE");
                    $write("\n");
                    for (dist_i=0; dist_i<32; dist_i=dist_i+1) begin
                        codeLength[dist_i] <= distanceLength[dist_i];
                    end
                    numCodeLength <= 32;
                    method <= 4;
                    cur_HF1 <= 0;
                    state <= 5'b00111;
                end
            end
            5'b00100: begin
                if (((!1'b1) || (!1'b1))) begin
                    // pass
                end
                else if ((howOften != 0)) begin
                    codeLength[numCodeLength] <= lastToken;
                    howOften <= (howOften - 1);
                    numCodeLength <= (numCodeLength + 1);
                end
                else if ((numCodeLength < (numLiterals + numDistance))) begin
                    cur_next <= 0;
                    state <= 5'b10011;
                end
                else begin
                    state <= 5'b00011;
                end
            end
            5'b00111: begin
                if ((1'b1 && 1'b1)) begin
                    if ((cur_HF1 < 16)) begin
                        bitLengthCount[cur_HF1] <= 0;
                    end
                    if (((cur_HF1 < 4096) && 1'b1)) begin
                        dlwaddr <= cur_HF1;
                        dwleaf <= 0;
                    end
                    if (((method != 4) && (cur_HF1 < 32768))) begin
                        lwaddr <= cur_HF1;
                        wleaf <= 0;
                    end
                    limit = 32768;
                    if (((method == 4) && 1'b1)) begin
                        limit = 4096;
                    end
                    if ((cur_HF1 < limit)) begin
                        cur_HF1 <= (cur_HF1 + 1);
                    end
                    else begin
                        $write("DID HF1 INIT");
                        $write("\n");
                        cur_i <= 0;
                        state <= 5'b01000;
                    end
                end
            end
            5'b01000: begin
                if (((!1'b1) || (!1'b1))) begin
                    // pass
                end
                else if ((cur_i < numCodeLength)) begin
                    j = codeLength[cur_i];
                    bitLengthCount[j] <= (bitLengthCount[j] + 1);
                    cur_i <= (cur_i + 1);
                end
                else begin
                    bitLengthCount[0] <= 0;
                    state <= 5'b01001;
                    cur_i <= 1;
                    if ((1'b1 && (method == 4))) begin
                        d_maxBits <= 0;
                    end
                    else begin
                        maxBits <= 0;
                    end
                    minBits <= 15;
                end
            end
            5'b01001: begin
                if (((!1'b1) || (!1'b1))) begin
                    // pass
                end
                else if ((cur_i <= 15)) begin
                    if ((bitLengthCount[cur_i] != 0)) begin
                        if ((cur_i < minBits)) begin
                            minBits <= cur_i;
                        end
                        if ((1'b1 && (method == 4))) begin
                            if ((cur_i > d_maxBits)) begin
                                d_maxBits <= cur_i;
                            end
                        end
                        else begin
                            if ((cur_i > maxBits)) begin
                                maxBits <= cur_i;
                            end
                        end
                    end
                    cur_i <= (cur_i + 1);
                end
                else begin
                    $write("%h", minBits);
                    $write(" ");
                    $write("%h", maxBits);
                    $write("\n");
                    t = 10;
                    if ((1'b1 && (method == 4))) begin
                        if ((t > d_maxBits)) begin
                            t = d_maxBits;
                        end
                        d_instantMaxBit <= t;
                        d_instantMask <= ((1 << t) - 1);
                    end
                    else begin
                        if ((t > maxBits)) begin
                            t = maxBits;
                        end
                        instantMaxBit <= t;
                        instantMask <= ((1 << t) - 1);
                    end
                    $write("%0d", ((1 << t) - 1));
                    $write("\n");
                    state <= 5'b01010;
                    cur_i <= minBits;
                    code <= 0;
                    for (hf2_i=0; hf2_i<16; hf2_i=hf2_i+1) begin
                        nextCode[hf2_i] <= 0;
                    end
                    $write("to HF3");
                    $write("\n");
                end
            end
            5'b01010: begin
                if ((1'b1 && 1'b1)) begin
                    amb = maxBits;
                    if ((1'b1 && (method == 4))) begin
                        amb = d_maxBits;
                    end
                    if ((cur_i <= amb)) begin
                        ncode = ((code + bitLengthCount[($signed({1'b0, cur_i}) - 1)]) << 1);
                        code <= ncode;
                        nextCode[cur_i] <= ncode;
                        cur_i <= (cur_i + 1);
                    end
                    else begin
                        state <= 5'b01011;
                        cur_i <= 0;
                        spread_i <= 0;
                        $write("to HF4");
                        $write("\n");
                    end
                end
            end
            5'b01100: begin
                if ((1'b1 && 1'b1)) begin
                    canonical = nextCode[bits];
                    nextCode[bits] <= (nextCode[bits] + 1);
                    if ((bits > 15)) begin
                        $finish;
                    end
                    reverse <= MYHDL83_rev_bits(canonical, bits);
                    leaf <= MYHDL84_makeLeaf(spread_i, bits);
                    state <= 5'b01101;
                end
            end
            5'b01101: begin
                if (((!1'b1) || (!1'b1))) begin
                    // pass
                end
                else if ((1'b1 && (method == 4))) begin
                    dwleaf <= leaf;
                    dlwaddr <= reverse;
                    if ((bits <= d_instantMaxBit)) begin
                        if (((reverse + (1 << bits)) <= d_instantMask)) begin
                            step <= (1 << bits);
                            spread <= (reverse + (1 << bits));
                            state <= 5'b10010;
                        end
                        else begin
                            spread_i <= (spread_i + 1);
                            state <= 5'b01011;
                        end
                    end
                    else begin
                        state <= 5'b01011;
                        spread_i <= (spread_i + 1);
                    end
                end
                else begin
                    wleaf <= leaf;
                    lwaddr <= reverse;
                    if ((bits <= instantMaxBit)) begin
                        if (((reverse + (1 << bits)) <= instantMask)) begin
                            step <= (1 << bits);
                            spread <= (reverse + (1 << bits));
                            state <= 5'b10010;
                        end
                        else begin
                            spread_i <= (spread_i + 1);
                            state <= 5'b01011;
                        end
                    end
                    else begin
                        spread_i <= (spread_i + 1);
                        state <= 5'b01011;
                    end
                end
            end
            5'b01011: begin
                if (((!1'b1) || (!1'b1))) begin
                    // pass
                end
                else if ((spread_i < numCodeLength)) begin
                    bits_next = codeLength[spread_i];
                    if ((bits_next != 0)) begin
                        bits <= bits_next;
                        state <= 5'b01100;
                    end
                    else begin
                        spread_i <= (spread_i + 1);
                    end
                end
                else begin
                    if (((method == 3) && 1'b1)) begin
                        state <= 5'b00101;
                    end
                    else if (((method == 4) && 1'b1)) begin
                        $write("DEFLATE m2!");
                        $write("\n");
                        state <= 5'b10011;
                    end
                    else if (((method == 2) && 1'b1)) begin
                        numCodeLength <= 0;
                        state <= 5'b10011;
                    end
                    else begin
                        state <= 5'b10011;
                    end
                    cur_next <= 0;
                    cur_i <= 0;
                end
            end
            5'b10010: begin
                if ((1'b1 && 1'b1)) begin
                    if (((method == 4) && 1'b1)) begin
                        dlwaddr <= spread;
                        dwleaf <= MYHDL85_makeLeaf(spread_i, codeLength[spread_i]);
                    end
                    else begin
                        lwaddr <= spread;
                        wleaf <= MYHDL86_makeLeaf(spread_i, codeLength[spread_i]);
                    end
                    aim = instantMask;
                    if (((method == 4) && 1'b1)) begin
                        aim = d_instantMask;
                    end
                    if (($signed({1'b0, spread}) > ($signed({1'b0, aim}) - $signed({1'b0, step})))) begin
                        spread_i <= (spread_i + 1);
                        state <= 5'b01011;
                    end
                    else begin
                        spread <= (spread + step);
                    end
                end
            end
            5'b10011: begin
                if ((!1'b1)) begin
                    // pass
                end
                else if ((!filled)) begin
                    filled <= 1'b1;
                end
                else if ((cur_next == 0)) begin
                    cto = MYHDL87_get4(0, maxBits);
                    mask = ((1 << instantMaxBit) - 1);
                    if (1'b1) begin
                        lraddr <= (cto & mask);
                        filled <= 1'b0;
                    end
                    else begin
                        case ((cto & mask))
                            0: stat_leaf <= 4103;
                            1: stat_leaf <= 1288;
                            2: stat_leaf <= 264;
                            3: stat_leaf <= 4488;
                            4: stat_leaf <= 4359;
                            5: stat_leaf <= 1800;
                            6: stat_leaf <= 776;
                            7: stat_leaf <= 3081;
                            8: stat_leaf <= 4231;
                            9: stat_leaf <= 1544;
                            10: stat_leaf <= 520;
                            11: stat_leaf <= 2569;
                            12: stat_leaf <= 8;
                            13: stat_leaf <= 2056;
                            14: stat_leaf <= 1032;
                            15: stat_leaf <= 3593;
                            16: stat_leaf <= 4167;
                            17: stat_leaf <= 1416;
                            18: stat_leaf <= 392;
                            19: stat_leaf <= 2313;
                            20: stat_leaf <= 4423;
                            21: stat_leaf <= 1928;
                            22: stat_leaf <= 904;
                            23: stat_leaf <= 3337;
                            24: stat_leaf <= 4295;
                            25: stat_leaf <= 1672;
                            26: stat_leaf <= 648;
                            27: stat_leaf <= 2825;
                            28: stat_leaf <= 136;
                            29: stat_leaf <= 2184;
                            30: stat_leaf <= 1160;
                            31: stat_leaf <= 3849;
                            32: stat_leaf <= 4135;
                            33: stat_leaf <= 1352;
                            34: stat_leaf <= 328;
                            35: stat_leaf <= 4552;
                            36: stat_leaf <= 4391;
                            37: stat_leaf <= 1864;
                            38: stat_leaf <= 840;
                            39: stat_leaf <= 3209;
                            40: stat_leaf <= 4263;
                            41: stat_leaf <= 1608;
                            42: stat_leaf <= 584;
                            43: stat_leaf <= 2697;
                            44: stat_leaf <= 72;
                            45: stat_leaf <= 2120;
                            46: stat_leaf <= 1096;
                            47: stat_leaf <= 3721;
                            48: stat_leaf <= 4199;
                            49: stat_leaf <= 1480;
                            50: stat_leaf <= 456;
                            51: stat_leaf <= 2441;
                            52: stat_leaf <= 4455;
                            53: stat_leaf <= 1992;
                            54: stat_leaf <= 968;
                            55: stat_leaf <= 3465;
                            56: stat_leaf <= 4327;
                            57: stat_leaf <= 1736;
                            58: stat_leaf <= 712;
                            59: stat_leaf <= 2953;
                            60: stat_leaf <= 200;
                            61: stat_leaf <= 2248;
                            62: stat_leaf <= 1224;
                            63: stat_leaf <= 3977;
                            64: stat_leaf <= 4119;
                            65: stat_leaf <= 1320;
                            66: stat_leaf <= 296;
                            67: stat_leaf <= 4520;
                            68: stat_leaf <= 4375;
                            69: stat_leaf <= 1832;
                            70: stat_leaf <= 808;
                            71: stat_leaf <= 3145;
                            72: stat_leaf <= 4247;
                            73: stat_leaf <= 1576;
                            74: stat_leaf <= 552;
                            75: stat_leaf <= 2633;
                            76: stat_leaf <= 40;
                            77: stat_leaf <= 2088;
                            78: stat_leaf <= 1064;
                            79: stat_leaf <= 3657;
                            80: stat_leaf <= 4183;
                            81: stat_leaf <= 1448;
                            82: stat_leaf <= 424;
                            83: stat_leaf <= 2377;
                            84: stat_leaf <= 4439;
                            85: stat_leaf <= 1960;
                            86: stat_leaf <= 936;
                            87: stat_leaf <= 3401;
                            88: stat_leaf <= 4311;
                            89: stat_leaf <= 1704;
                            90: stat_leaf <= 680;
                            91: stat_leaf <= 2889;
                            92: stat_leaf <= 168;
                            93: stat_leaf <= 2216;
                            94: stat_leaf <= 1192;
                            95: stat_leaf <= 3913;
                            96: stat_leaf <= 4151;
                            97: stat_leaf <= 1384;
                            98: stat_leaf <= 360;
                            99: stat_leaf <= 4584;
                            100: stat_leaf <= 4407;
                            101: stat_leaf <= 1896;
                            102: stat_leaf <= 872;
                            103: stat_leaf <= 3273;
                            104: stat_leaf <= 4279;
                            105: stat_leaf <= 1640;
                            106: stat_leaf <= 616;
                            107: stat_leaf <= 2761;
                            108: stat_leaf <= 104;
                            109: stat_leaf <= 2152;
                            110: stat_leaf <= 1128;
                            111: stat_leaf <= 3785;
                            112: stat_leaf <= 4215;
                            113: stat_leaf <= 1512;
                            114: stat_leaf <= 488;
                            115: stat_leaf <= 2505;
                            116: stat_leaf <= 4471;
                            117: stat_leaf <= 2024;
                            118: stat_leaf <= 1000;
                            119: stat_leaf <= 3529;
                            120: stat_leaf <= 4343;
                            121: stat_leaf <= 1768;
                            122: stat_leaf <= 744;
                            123: stat_leaf <= 3017;
                            124: stat_leaf <= 232;
                            125: stat_leaf <= 2280;
                            126: stat_leaf <= 1256;
                            127: stat_leaf <= 4041;
                            128: stat_leaf <= 4103;
                            129: stat_leaf <= 1304;
                            130: stat_leaf <= 280;
                            131: stat_leaf <= 4504;
                            132: stat_leaf <= 4359;
                            133: stat_leaf <= 1816;
                            134: stat_leaf <= 792;
                            135: stat_leaf <= 3113;
                            136: stat_leaf <= 4231;
                            137: stat_leaf <= 1560;
                            138: stat_leaf <= 536;
                            139: stat_leaf <= 2601;
                            140: stat_leaf <= 24;
                            141: stat_leaf <= 2072;
                            142: stat_leaf <= 1048;
                            143: stat_leaf <= 3625;
                            144: stat_leaf <= 4167;
                            145: stat_leaf <= 1432;
                            146: stat_leaf <= 408;
                            147: stat_leaf <= 2345;
                            148: stat_leaf <= 4423;
                            149: stat_leaf <= 1944;
                            150: stat_leaf <= 920;
                            151: stat_leaf <= 3369;
                            152: stat_leaf <= 4295;
                            153: stat_leaf <= 1688;
                            154: stat_leaf <= 664;
                            155: stat_leaf <= 2857;
                            156: stat_leaf <= 152;
                            157: stat_leaf <= 2200;
                            158: stat_leaf <= 1176;
                            159: stat_leaf <= 3881;
                            160: stat_leaf <= 4135;
                            161: stat_leaf <= 1368;
                            162: stat_leaf <= 344;
                            163: stat_leaf <= 4568;
                            164: stat_leaf <= 4391;
                            165: stat_leaf <= 1880;
                            166: stat_leaf <= 856;
                            167: stat_leaf <= 3241;
                            168: stat_leaf <= 4263;
                            169: stat_leaf <= 1624;
                            170: stat_leaf <= 600;
                            171: stat_leaf <= 2729;
                            172: stat_leaf <= 88;
                            173: stat_leaf <= 2136;
                            174: stat_leaf <= 1112;
                            175: stat_leaf <= 3753;
                            176: stat_leaf <= 4199;
                            177: stat_leaf <= 1496;
                            178: stat_leaf <= 472;
                            179: stat_leaf <= 2473;
                            180: stat_leaf <= 4455;
                            181: stat_leaf <= 2008;
                            182: stat_leaf <= 984;
                            183: stat_leaf <= 3497;
                            184: stat_leaf <= 4327;
                            185: stat_leaf <= 1752;
                            186: stat_leaf <= 728;
                            187: stat_leaf <= 2985;
                            188: stat_leaf <= 216;
                            189: stat_leaf <= 2264;
                            190: stat_leaf <= 1240;
                            191: stat_leaf <= 4009;
                            192: stat_leaf <= 4119;
                            193: stat_leaf <= 1336;
                            194: stat_leaf <= 312;
                            195: stat_leaf <= 4536;
                            196: stat_leaf <= 4375;
                            197: stat_leaf <= 1848;
                            198: stat_leaf <= 824;
                            199: stat_leaf <= 3177;
                            200: stat_leaf <= 4247;
                            201: stat_leaf <= 1592;
                            202: stat_leaf <= 568;
                            203: stat_leaf <= 2665;
                            204: stat_leaf <= 56;
                            205: stat_leaf <= 2104;
                            206: stat_leaf <= 1080;
                            207: stat_leaf <= 3689;
                            208: stat_leaf <= 4183;
                            209: stat_leaf <= 1464;
                            210: stat_leaf <= 440;
                            211: stat_leaf <= 2409;
                            212: stat_leaf <= 4439;
                            213: stat_leaf <= 1976;
                            214: stat_leaf <= 952;
                            215: stat_leaf <= 3433;
                            216: stat_leaf <= 4311;
                            217: stat_leaf <= 1720;
                            218: stat_leaf <= 696;
                            219: stat_leaf <= 2921;
                            220: stat_leaf <= 184;
                            221: stat_leaf <= 2232;
                            222: stat_leaf <= 1208;
                            223: stat_leaf <= 3945;
                            224: stat_leaf <= 4151;
                            225: stat_leaf <= 1400;
                            226: stat_leaf <= 376;
                            227: stat_leaf <= 4600;
                            228: stat_leaf <= 4407;
                            229: stat_leaf <= 1912;
                            230: stat_leaf <= 888;
                            231: stat_leaf <= 3305;
                            232: stat_leaf <= 4279;
                            233: stat_leaf <= 1656;
                            234: stat_leaf <= 632;
                            235: stat_leaf <= 2793;
                            236: stat_leaf <= 120;
                            237: stat_leaf <= 2168;
                            238: stat_leaf <= 1144;
                            239: stat_leaf <= 3817;
                            240: stat_leaf <= 4215;
                            241: stat_leaf <= 1528;
                            242: stat_leaf <= 504;
                            243: stat_leaf <= 2537;
                            244: stat_leaf <= 4471;
                            245: stat_leaf <= 2040;
                            246: stat_leaf <= 1016;
                            247: stat_leaf <= 3561;
                            248: stat_leaf <= 4343;
                            249: stat_leaf <= 1784;
                            250: stat_leaf <= 760;
                            251: stat_leaf <= 3049;
                            252: stat_leaf <= 248;
                            253: stat_leaf <= 2296;
                            254: stat_leaf <= 1272;
                            255: stat_leaf <= 4073;
                            256: stat_leaf <= 4103;
                            257: stat_leaf <= 1288;
                            258: stat_leaf <= 264;
                            259: stat_leaf <= 4488;
                            260: stat_leaf <= 4359;
                            261: stat_leaf <= 1800;
                            262: stat_leaf <= 776;
                            263: stat_leaf <= 3097;
                            264: stat_leaf <= 4231;
                            265: stat_leaf <= 1544;
                            266: stat_leaf <= 520;
                            267: stat_leaf <= 2585;
                            268: stat_leaf <= 8;
                            269: stat_leaf <= 2056;
                            270: stat_leaf <= 1032;
                            271: stat_leaf <= 3609;
                            272: stat_leaf <= 4167;
                            273: stat_leaf <= 1416;
                            274: stat_leaf <= 392;
                            275: stat_leaf <= 2329;
                            276: stat_leaf <= 4423;
                            277: stat_leaf <= 1928;
                            278: stat_leaf <= 904;
                            279: stat_leaf <= 3353;
                            280: stat_leaf <= 4295;
                            281: stat_leaf <= 1672;
                            282: stat_leaf <= 648;
                            283: stat_leaf <= 2841;
                            284: stat_leaf <= 136;
                            285: stat_leaf <= 2184;
                            286: stat_leaf <= 1160;
                            287: stat_leaf <= 3865;
                            288: stat_leaf <= 4135;
                            289: stat_leaf <= 1352;
                            290: stat_leaf <= 328;
                            291: stat_leaf <= 4552;
                            292: stat_leaf <= 4391;
                            293: stat_leaf <= 1864;
                            294: stat_leaf <= 840;
                            295: stat_leaf <= 3225;
                            296: stat_leaf <= 4263;
                            297: stat_leaf <= 1608;
                            298: stat_leaf <= 584;
                            299: stat_leaf <= 2713;
                            300: stat_leaf <= 72;
                            301: stat_leaf <= 2120;
                            302: stat_leaf <= 1096;
                            303: stat_leaf <= 3737;
                            304: stat_leaf <= 4199;
                            305: stat_leaf <= 1480;
                            306: stat_leaf <= 456;
                            307: stat_leaf <= 2457;
                            308: stat_leaf <= 4455;
                            309: stat_leaf <= 1992;
                            310: stat_leaf <= 968;
                            311: stat_leaf <= 3481;
                            312: stat_leaf <= 4327;
                            313: stat_leaf <= 1736;
                            314: stat_leaf <= 712;
                            315: stat_leaf <= 2969;
                            316: stat_leaf <= 200;
                            317: stat_leaf <= 2248;
                            318: stat_leaf <= 1224;
                            319: stat_leaf <= 3993;
                            320: stat_leaf <= 4119;
                            321: stat_leaf <= 1320;
                            322: stat_leaf <= 296;
                            323: stat_leaf <= 4520;
                            324: stat_leaf <= 4375;
                            325: stat_leaf <= 1832;
                            326: stat_leaf <= 808;
                            327: stat_leaf <= 3161;
                            328: stat_leaf <= 4247;
                            329: stat_leaf <= 1576;
                            330: stat_leaf <= 552;
                            331: stat_leaf <= 2649;
                            332: stat_leaf <= 40;
                            333: stat_leaf <= 2088;
                            334: stat_leaf <= 1064;
                            335: stat_leaf <= 3673;
                            336: stat_leaf <= 4183;
                            337: stat_leaf <= 1448;
                            338: stat_leaf <= 424;
                            339: stat_leaf <= 2393;
                            340: stat_leaf <= 4439;
                            341: stat_leaf <= 1960;
                            342: stat_leaf <= 936;
                            343: stat_leaf <= 3417;
                            344: stat_leaf <= 4311;
                            345: stat_leaf <= 1704;
                            346: stat_leaf <= 680;
                            347: stat_leaf <= 2905;
                            348: stat_leaf <= 168;
                            349: stat_leaf <= 2216;
                            350: stat_leaf <= 1192;
                            351: stat_leaf <= 3929;
                            352: stat_leaf <= 4151;
                            353: stat_leaf <= 1384;
                            354: stat_leaf <= 360;
                            355: stat_leaf <= 4584;
                            356: stat_leaf <= 4407;
                            357: stat_leaf <= 1896;
                            358: stat_leaf <= 872;
                            359: stat_leaf <= 3289;
                            360: stat_leaf <= 4279;
                            361: stat_leaf <= 1640;
                            362: stat_leaf <= 616;
                            363: stat_leaf <= 2777;
                            364: stat_leaf <= 104;
                            365: stat_leaf <= 2152;
                            366: stat_leaf <= 1128;
                            367: stat_leaf <= 3801;
                            368: stat_leaf <= 4215;
                            369: stat_leaf <= 1512;
                            370: stat_leaf <= 488;
                            371: stat_leaf <= 2521;
                            372: stat_leaf <= 4471;
                            373: stat_leaf <= 2024;
                            374: stat_leaf <= 1000;
                            375: stat_leaf <= 3545;
                            376: stat_leaf <= 4343;
                            377: stat_leaf <= 1768;
                            378: stat_leaf <= 744;
                            379: stat_leaf <= 3033;
                            380: stat_leaf <= 232;
                            381: stat_leaf <= 2280;
                            382: stat_leaf <= 1256;
                            383: stat_leaf <= 4057;
                            384: stat_leaf <= 4103;
                            385: stat_leaf <= 1304;
                            386: stat_leaf <= 280;
                            387: stat_leaf <= 4504;
                            388: stat_leaf <= 4359;
                            389: stat_leaf <= 1816;
                            390: stat_leaf <= 792;
                            391: stat_leaf <= 3129;
                            392: stat_leaf <= 4231;
                            393: stat_leaf <= 1560;
                            394: stat_leaf <= 536;
                            395: stat_leaf <= 2617;
                            396: stat_leaf <= 24;
                            397: stat_leaf <= 2072;
                            398: stat_leaf <= 1048;
                            399: stat_leaf <= 3641;
                            400: stat_leaf <= 4167;
                            401: stat_leaf <= 1432;
                            402: stat_leaf <= 408;
                            403: stat_leaf <= 2361;
                            404: stat_leaf <= 4423;
                            405: stat_leaf <= 1944;
                            406: stat_leaf <= 920;
                            407: stat_leaf <= 3385;
                            408: stat_leaf <= 4295;
                            409: stat_leaf <= 1688;
                            410: stat_leaf <= 664;
                            411: stat_leaf <= 2873;
                            412: stat_leaf <= 152;
                            413: stat_leaf <= 2200;
                            414: stat_leaf <= 1176;
                            415: stat_leaf <= 3897;
                            416: stat_leaf <= 4135;
                            417: stat_leaf <= 1368;
                            418: stat_leaf <= 344;
                            419: stat_leaf <= 4568;
                            420: stat_leaf <= 4391;
                            421: stat_leaf <= 1880;
                            422: stat_leaf <= 856;
                            423: stat_leaf <= 3257;
                            424: stat_leaf <= 4263;
                            425: stat_leaf <= 1624;
                            426: stat_leaf <= 600;
                            427: stat_leaf <= 2745;
                            428: stat_leaf <= 88;
                            429: stat_leaf <= 2136;
                            430: stat_leaf <= 1112;
                            431: stat_leaf <= 3769;
                            432: stat_leaf <= 4199;
                            433: stat_leaf <= 1496;
                            434: stat_leaf <= 472;
                            435: stat_leaf <= 2489;
                            436: stat_leaf <= 4455;
                            437: stat_leaf <= 2008;
                            438: stat_leaf <= 984;
                            439: stat_leaf <= 3513;
                            440: stat_leaf <= 4327;
                            441: stat_leaf <= 1752;
                            442: stat_leaf <= 728;
                            443: stat_leaf <= 3001;
                            444: stat_leaf <= 216;
                            445: stat_leaf <= 2264;
                            446: stat_leaf <= 1240;
                            447: stat_leaf <= 4025;
                            448: stat_leaf <= 4119;
                            449: stat_leaf <= 1336;
                            450: stat_leaf <= 312;
                            451: stat_leaf <= 4536;
                            452: stat_leaf <= 4375;
                            453: stat_leaf <= 1848;
                            454: stat_leaf <= 824;
                            455: stat_leaf <= 3193;
                            456: stat_leaf <= 4247;
                            457: stat_leaf <= 1592;
                            458: stat_leaf <= 568;
                            459: stat_leaf <= 2681;
                            460: stat_leaf <= 56;
                            461: stat_leaf <= 2104;
                            462: stat_leaf <= 1080;
                            463: stat_leaf <= 3705;
                            464: stat_leaf <= 4183;
                            465: stat_leaf <= 1464;
                            466: stat_leaf <= 440;
                            467: stat_leaf <= 2425;
                            468: stat_leaf <= 4439;
                            469: stat_leaf <= 1976;
                            470: stat_leaf <= 952;
                            471: stat_leaf <= 3449;
                            472: stat_leaf <= 4311;
                            473: stat_leaf <= 1720;
                            474: stat_leaf <= 696;
                            475: stat_leaf <= 2937;
                            476: stat_leaf <= 184;
                            477: stat_leaf <= 2232;
                            478: stat_leaf <= 1208;
                            479: stat_leaf <= 3961;
                            480: stat_leaf <= 4151;
                            481: stat_leaf <= 1400;
                            482: stat_leaf <= 376;
                            483: stat_leaf <= 0;
                            484: stat_leaf <= 4407;
                            485: stat_leaf <= 1912;
                            486: stat_leaf <= 888;
                            487: stat_leaf <= 3321;
                            488: stat_leaf <= 4279;
                            489: stat_leaf <= 1656;
                            490: stat_leaf <= 632;
                            491: stat_leaf <= 2809;
                            492: stat_leaf <= 120;
                            493: stat_leaf <= 2168;
                            494: stat_leaf <= 1144;
                            495: stat_leaf <= 3833;
                            496: stat_leaf <= 4215;
                            497: stat_leaf <= 1528;
                            498: stat_leaf <= 504;
                            499: stat_leaf <= 2553;
                            500: stat_leaf <= 4471;
                            501: stat_leaf <= 2040;
                            502: stat_leaf <= 1016;
                            503: stat_leaf <= 3577;
                            504: stat_leaf <= 4343;
                            505: stat_leaf <= 1784;
                            506: stat_leaf <= 760;
                            507: stat_leaf <= 3065;
                            508: stat_leaf <= 248;
                            509: stat_leaf <= 2296;
                            510: stat_leaf <= 1272;
                            default: stat_leaf <= 4089;
                        endcase
                    end
                    cur_next <= (instantMaxBit + 1);
                end
                else if ((1'b1 && (MYHDL88_get_bits(rleaf) >= cur_next))) begin
                    $write("CACHE MISS");
                    $write(" ");
                    $write("%h", cur_next);
                    $write("\n");
                    cto = MYHDL89_get4(0, maxBits);
                    mask = ((1 << cur_next) - 1);
                    lraddr <= (cto & mask);
                    filled <= 1'b0;
                    cur_next <= (cur_next + 1);
                end
                else begin
                    the_leaf = rleaf;
                    if ((!1'b1)) begin
                        the_leaf = stat_leaf;
                    end
                    if ((MYHDL90_get_bits(the_leaf) < 1)) begin
                        $write("< 1 bits: ");
                        $write("\n");
                        $finish;
                    end
                    MYHDL92_adv(MYHDL91_get_bits(the_leaf));
                    code <= MYHDL93_get_code(the_leaf);
                    if ((1'b1 && (method == 2))) begin
                        state <= 5'b00011;
                    end
                    else begin
                        state <= 5'b10100;
                    end
                end
            end
            5'b01111: begin
                if (((!1'b1) || (!1'b1))) begin
                    // pass
                end
                else if ((!filled)) begin
                    filled <= 1'b1;
                end
                else if ((cur_next == 0)) begin
                    if ((d_instantMaxBit > 10)) begin
                        $finish;
                    end
                    token = (code - 257);
                    case (token)
                        0: extraLength = 0;
                        1: extraLength = 0;
                        2: extraLength = 0;
                        3: extraLength = 0;
                        4: extraLength = 0;
                        5: extraLength = 0;
                        6: extraLength = 0;
                        7: extraLength = 0;
                        8: extraLength = 1;
                        9: extraLength = 1;
                        10: extraLength = 1;
                        11: extraLength = 1;
                        12: extraLength = 2;
                        13: extraLength = 2;
                        14: extraLength = 2;
                        15: extraLength = 2;
                        16: extraLength = 3;
                        17: extraLength = 3;
                        18: extraLength = 3;
                        19: extraLength = 3;
                        20: extraLength = 4;
                        21: extraLength = 4;
                        22: extraLength = 4;
                        23: extraLength = 4;
                        24: extraLength = 5;
                        25: extraLength = 5;
                        26: extraLength = 5;
                        27: extraLength = 5;
                        default: extraLength = 0;
                    endcase
                    cto = MYHDL94_get4(extraLength, d_maxBits);
                    mask = ((1 << d_instantMaxBit) - 1);
                    dlraddr <= (cto & mask);
                    filled <= 1'b0;
                    cur_next <= (instantMaxBit + 1);
                end
                else if ((MYHDL95_get_bits(drleaf) >= cur_next)) begin
                    $write("DCACHE MISS");
                    $write(" ");
                    $write("%h", cur_next);
                    $write("\n");
                    token = (code - 257);
                    case (token)
                        0: extraLength = 0;
                        1: extraLength = 0;
                        2: extraLength = 0;
                        3: extraLength = 0;
                        4: extraLength = 0;
                        5: extraLength = 0;
                        6: extraLength = 0;
                        7: extraLength = 0;
                        8: extraLength = 1;
                        9: extraLength = 1;
                        10: extraLength = 1;
                        11: extraLength = 1;
                        12: extraLength = 2;
                        13: extraLength = 2;
                        14: extraLength = 2;
                        15: extraLength = 2;
                        16: extraLength = 3;
                        17: extraLength = 3;
                        18: extraLength = 3;
                        19: extraLength = 3;
                        20: extraLength = 4;
                        21: extraLength = 4;
                        22: extraLength = 4;
                        23: extraLength = 4;
                        24: extraLength = 5;
                        25: extraLength = 5;
                        26: extraLength = 5;
                        27: extraLength = 5;
                        default: extraLength = 0;
                    endcase
                    cto = MYHDL96_get4(extraLength, d_maxBits);
                    mask = ((1 << cur_next) - 1);
                    dlraddr <= (cto & mask);
                    filled <= 1'b0;
                    cur_next <= (cur_next + 1);
                end
                else begin
                    state <= 5'b10000;
                end
            end
            5'b10000: begin
                if ((1'b1 && 1'b1)) begin
                    if ((MYHDL97_get_bits(drleaf) == 0)) begin
                        $finish;
                    end
                    token = (code - 257);
                    case (token)
                        0: tlength = 3;
                        1: tlength = 4;
                        2: tlength = 5;
                        3: tlength = 6;
                        4: tlength = 7;
                        5: tlength = 8;
                        6: tlength = 9;
                        7: tlength = 10;
                        8: tlength = 11;
                        9: tlength = 13;
                        10: tlength = 15;
                        11: tlength = 17;
                        12: tlength = 19;
                        13: tlength = 23;
                        14: tlength = 27;
                        15: tlength = 31;
                        16: tlength = 35;
                        17: tlength = 43;
                        18: tlength = 51;
                        19: tlength = 59;
                        20: tlength = 67;
                        21: tlength = 83;
                        22: tlength = 99;
                        23: tlength = 115;
                        24: tlength = 131;
                        25: tlength = 163;
                        26: tlength = 195;
                        27: tlength = 227;
                        default: tlength = 258;
                    endcase
                    case (token)
                        0: extraLength = 0;
                        1: extraLength = 0;
                        2: extraLength = 0;
                        3: extraLength = 0;
                        4: extraLength = 0;
                        5: extraLength = 0;
                        6: extraLength = 0;
                        7: extraLength = 0;
                        8: extraLength = 1;
                        9: extraLength = 1;
                        10: extraLength = 1;
                        11: extraLength = 1;
                        12: extraLength = 2;
                        13: extraLength = 2;
                        14: extraLength = 2;
                        15: extraLength = 2;
                        16: extraLength = 3;
                        17: extraLength = 3;
                        18: extraLength = 3;
                        19: extraLength = 3;
                        20: extraLength = 4;
                        21: extraLength = 4;
                        22: extraLength = 4;
                        23: extraLength = 4;
                        24: extraLength = 5;
                        25: extraLength = 5;
                        26: extraLength = 5;
                        27: extraLength = 5;
                        default: extraLength = 0;
                    endcase
                    tlength = tlength + MYHDL98_get4(0, extraLength);
                    distanceCode = MYHDL99_get_code(drleaf);
                    case (distanceCode)
                        0: distance = 1;
                        1: distance = 2;
                        2: distance = 3;
                        3: distance = 4;
                        4: distance = 5;
                        5: distance = 7;
                        6: distance = 9;
                        7: distance = 13;
                        8: distance = 17;
                        9: distance = 25;
                        10: distance = 33;
                        11: distance = 49;
                        12: distance = 65;
                        13: distance = 97;
                        14: distance = 129;
                        15: distance = 193;
                        16: distance = 257;
                        17: distance = 385;
                        18: distance = 513;
                        19: distance = 769;
                        20: distance = 1025;
                        21: distance = 1537;
                        22: distance = 2049;
                        23: distance = 3073;
                        24: distance = 4097;
                        25: distance = 6145;
                        26: distance = 8193;
                        27: distance = 12289;
                        28: distance = 16385;
                        default: distance = 24577;
                    endcase
                    case ($signed(distanceCode >>> 1))
                        0: moreBits = 0;
                        1: moreBits = 0;
                        2: moreBits = 1;
                        3: moreBits = 2;
                        4: moreBits = 3;
                        5: moreBits = 4;
                        6: moreBits = 5;
                        7: moreBits = 6;
                        8: moreBits = 7;
                        9: moreBits = 8;
                        10: moreBits = 9;
                        11: moreBits = 10;
                        12: moreBits = 11;
                        13: moreBits = 12;
                        default: moreBits = 13;
                    endcase
                    mored = MYHDL101_get4((extraLength + MYHDL100_get_bits(drleaf)), moreBits);
                    distance = distance + mored;
                    if ((distance > $signed({1'b0, do}))) begin
                        $write("%0d", distance);
                        $write(" ");
                        $write("%h", do);
                        $write("\n");
                        $finish;
                    end
                    MYHDL103_adv(((moreBits + extraLength) + MYHDL102_get_bits(drleaf)));
                    offset <= (($signed({1'b0, do}) - distance) & 511);
                    length <= tlength;
                    cur_i <= 0;
                    oraddr <= ($signed({1'b0, do}) - distance);
                    state <= 5'b10101;
                end
            end
            5'b10100: begin
                if ((!1'b1)) begin
                    // pass
                end
                else if ((1'b0 && (fcount < 3))) begin
                    // pass
                end
                else if (((method == 1) && (!filled))) begin
                    filled <= 1'b1;
                end
                else if ((($signed({1'b0, di}) >= ($signed({1'b0, isize}) - 4)) && (!(i_mode == 0)))) begin
                    // pass
                end
                else if ((do >= (i_raddr + 512))) begin
                    $write("HOLDB");
                    $write("\n");
                    // pass
                end
                else if (($signed({1'b0, di}) > ($signed({1'b0, isize}) - 3))) begin
                    state <= 5'b00000;
                    o_done <= 1'b1;
                    $write("NO EOF ");
                    $write(" ");
                    $write("%h", di);
                    $write("\n");
                    $finish;
                end
                else if ((code == 256)) begin
                    $write("EOF:");
                    $write(" ");
                    $write("%h", isize);
                    $write(" ");
                    $write("%h", di);
                    $write(" ");
                    $write("%h", do);
                    $write("\n");
                    if (((!1'b0) && (!final))) begin
                        state <= 5'b00001;
                        filled <= 1'b0;
                        $write("New Block!");
                        $write("\n");
                    end
                    else begin
                        o_done <= 1'b1;
                        state <= 5'b00000;
                    end
                end
                else begin
                    if ((code < 256)) begin
                        oaddr <= do;
                        obyte <= code;
                        o_oprogress <= (do + 1);
                        do <= (do + 1);
                        cur_next <= 0;
                        state <= 5'b10011;
                    end
                    else if ((code == 300)) begin
                        $finish;
                    end
                    else begin
                        if (((!1'b1) || static)) begin
                            token = (code - 257);
                            case (token)
                                0: tlength = 3;
                                1: tlength = 4;
                                2: tlength = 5;
                                3: tlength = 6;
                                4: tlength = 7;
                                5: tlength = 8;
                                6: tlength = 9;
                                7: tlength = 10;
                                8: tlength = 11;
                                9: tlength = 13;
                                10: tlength = 15;
                                11: tlength = 17;
                                12: tlength = 19;
                                13: tlength = 23;
                                14: tlength = 27;
                                15: tlength = 31;
                                16: tlength = 35;
                                17: tlength = 43;
                                18: tlength = 51;
                                19: tlength = 59;
                                20: tlength = 67;
                                21: tlength = 83;
                                22: tlength = 99;
                                23: tlength = 115;
                                24: tlength = 131;
                                25: tlength = 163;
                                26: tlength = 195;
                                27: tlength = 227;
                                default: tlength = 258;
                            endcase
                            case (token)
                                0: extraLength = 0;
                                1: extraLength = 0;
                                2: extraLength = 0;
                                3: extraLength = 0;
                                4: extraLength = 0;
                                5: extraLength = 0;
                                6: extraLength = 0;
                                7: extraLength = 0;
                                8: extraLength = 1;
                                9: extraLength = 1;
                                10: extraLength = 1;
                                11: extraLength = 1;
                                12: extraLength = 2;
                                13: extraLength = 2;
                                14: extraLength = 2;
                                15: extraLength = 2;
                                16: extraLength = 3;
                                17: extraLength = 3;
                                18: extraLength = 3;
                                19: extraLength = 3;
                                20: extraLength = 4;
                                21: extraLength = 4;
                                22: extraLength = 4;
                                23: extraLength = 4;
                                24: extraLength = 5;
                                25: extraLength = 5;
                                26: extraLength = 5;
                                27: extraLength = 5;
                                default: extraLength = 0;
                            endcase
                            tlength = tlength + MYHDL104_get4(0, extraLength);
                            t = MYHDL105_get4(extraLength, 5);
                            distanceCode = MYHDL106_rev_bits(t, 5);
                            case (distanceCode)
                                0: distance = 1;
                                1: distance = 2;
                                2: distance = 3;
                                3: distance = 4;
                                4: distance = 5;
                                5: distance = 7;
                                6: distance = 9;
                                7: distance = 13;
                                8: distance = 17;
                                9: distance = 25;
                                10: distance = 33;
                                11: distance = 49;
                                12: distance = 65;
                                13: distance = 97;
                                14: distance = 129;
                                15: distance = 193;
                                16: distance = 257;
                                17: distance = 385;
                                18: distance = 513;
                                19: distance = 769;
                                20: distance = 1025;
                                21: distance = 1537;
                                22: distance = 2049;
                                23: distance = 3073;
                                24: distance = 4097;
                                25: distance = 6145;
                                26: distance = 8193;
                                27: distance = 12289;
                                28: distance = 16385;
                                default: distance = 24577;
                            endcase
                            case ($signed(distanceCode >>> 1))
                                0: moreBits = 0;
                                1: moreBits = 0;
                                2: moreBits = 1;
                                3: moreBits = 2;
                                4: moreBits = 3;
                                5: moreBits = 4;
                                6: moreBits = 5;
                                7: moreBits = 6;
                                8: moreBits = 7;
                                9: moreBits = 8;
                                10: moreBits = 9;
                                11: moreBits = 10;
                                12: moreBits = 11;
                                13: moreBits = 12;
                                default: moreBits = 13;
                            endcase
                            distance = distance + MYHDL107_get4((extraLength + 5), moreBits);
                            MYHDL108_adv(((extraLength + 5) + moreBits));
                            offset <= (($signed({1'b0, do}) - distance) & 511);
                            length <= tlength;
                            cur_i <= 0;
                            oraddr <= ($signed({1'b0, do}) - distance);
                            state <= 5'b10101;
                        end
                        else begin
                            if ((!1'b1)) begin
                                $write("DYNAMIC mode disabled");
                                $write("\n");
                                $finish;
                            end
                            state <= 5'b01111;
                        end
                    end
                    cur_next <= 0;
                end
            end
            5'b10101: begin
                if ((!1'b1)) begin
                    // pass
                end
                else if (((cur_i == 0) && ((do + length) >= (i_raddr + 512)))) begin
                    // pass
                end
                else if (($signed({1'b0, di}) >= ($signed({1'b0, isize}) - 2))) begin
                    // pass
                end
                else if ((1'b1 && (method == 0))) begin
                    if ((!filled)) begin
                        filled <= 1'b1;
                    end
                    else if ((cur_i < length)) begin
                        oaddr <= do;
                        obyte <= b3;
                        di <= (di + 1);
                        filled <= 1'b0;
                        o_iprogress <= di;
                        cur_i <= (cur_i + 1);
                        do <= (do + 1);
                        o_oprogress <= (do + 1);
                    end
                    else if (((!1'b0) && (!final))) begin
                        di <= (di + 2);
                        o_iprogress <= di;
                        state <= 5'b00001;
                        filled <= 1'b0;
                        $write("new block");
                        $write("\n");
                    end
                    else begin
                        o_done <= 1'b1;
                        state <= 5'b00000;
                    end
                end
                else if ((cur_i < (length + 2))) begin
                    oraddr <= (offset + cur_i);
                    if ((cur_i == 1)) begin
                        off1 <= ($signed({1'b0, offset}) == (($signed({1'b0, do}) - 1) & 511));
                        off2 <= ($signed({1'b0, offset}) == (($signed({1'b0, do}) - 2) & 511));
                        copy1 <= orbyte;
                    end
                    if ((cur_i == 3)) begin
                        copy2 <= orbyte;
                    end
                    if ((cur_i > 1)) begin
                        if (off1) begin
                            obyte <= copy1;
                        end
                        else if (((cur_i == 3) || (!off2))) begin
                            obyte <= orbyte;
                        end
                        else if ((cur_i > 2)) begin
                            if ((cur_i & 1)) begin
                                obyte <= copy2;
                            end
                            else begin
                                obyte <= copy1;
                            end
                        end
                        else begin
                            obyte <= copy1;
                        end
                        oaddr <= do;
                        o_oprogress <= (do + 1);
                        do <= (do + 1);
                    end
                    cur_i <= (cur_i + 1);
                end
                else begin
                    cur_next <= 0;
                    state <= 5'b10011;
                end
            end
            default: begin
                $write("unknown state?!");
                $write("\n");
                state <= 5'b00000;
            end
        endcase
    end
end

endmodule
